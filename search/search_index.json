{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>\u5b66\u4e60\u7684\u8bb0\u5f55\uff0c\u4e3b\u8981\u6d89\u53ca\u4ee5\u4e0b\u4e3b\u9898\uff08\u4e0a\u65b9 tab\uff09\uff1a</p> <ul> <li> <p>\u4e1a\u52a1</p> </li> <li> <p>\u4eba\u5de5\u667a\u80fd\uff08\u5c24\u5176\u662f\u5546\u4e1a\u5e94\u7528\uff09</p> </li> <li> <p>3C \u4ea7\u54c1\uff08\u9762\u5411\u5de5\u4e1a\u5236\u9020\uff09</p> </li> <li> <p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784</p> </li> </ul> <p>Record of learning, mainly related to the following topics (tab above):</p> <ul> <li> <p>Business</p> </li> <li> <p>Artificial intelligence (especially commercial applications)</p> </li> <li> <p>3C products (for industrial manufacturing)</p> </li> <li> <p>Computer System</p> </li> </ul>"},{"location":"3c/toothbrushes/","title":"Electric toothbrushes","text":""},{"location":"AI/deep_learning/","title":"Deep Learning","text":"<p>Here's the example from MkDocs Material documentation: </p> <pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre>"},{"location":"AI/machine_learning/","title":"Machine Learning","text":"<p>LaTeX math is supported using MathJax.</p> <p>Inline math looks like \\(f(x) = x^2\\). The input for this is <code>$f(x) = x^2$</code>. Use <code>$...$</code>.</p> <p>For a block of math, use <code>$$...$$</code> on separate lines</p> <pre><code>$$\nF(x) = \\int^a_b \\frac{1}{2}x^4\n$$\n</code></pre> <p>gives </p> \\[ F(x) = \\int^a_b \\frac{1}{2}x^4 \\]"},{"location":"AI/nlp_cv/","title":"NLP &amp; CV","text":""},{"location":"AI/LLMs/multi-agent/","title":"Multi-Agent","text":"<p>\u5148\u804a\u4e00\u4e0b\u4f20\u7edf\u610f\u4e49\u4e0a\u7684 Agent\uff0c\u8bf4\u6e05\u695a LLM \u5f15\u5165 Agent \u7684\u80cc\u666f\u548c motivation\uff0c\u518d\u4ecb\u7ecd\u4e00\u79cd\u5bf9\u5176\u7406\u8bba\u5efa\u6a21\u7684\u65b9\u5f0f\uff0c\u4ee5\u53ca\u6bd4\u8f83\u5f3a\u5927\u7684\u4e00\u6b3e\u65b9\u4fbf\u843d\u5730\u7684\u6846\u67b6\uff08AutoGen\uff09\uff0c\u6700\u540e\u8c08\u8c08\u6f5c\u5728\u7684\u4e00\u4e9b\u5178\u578b\u95ee\u9898\u3002</p>"},{"location":"AI/LLMs/multi-agent/#classic-agent","title":"Classic Agent","text":"<p>Agent \u4e0d\u662f\u4e00\u4e2a\u65b0\u9c9c\u7684\u6982\u5ff5\uff0c\u5728 LLM \u5f15\u8d77\u5e7f\u6cdb\u6ce8\u610f\u4e4b\u524d\u5df2\u7ecf\u6709\u4e86\u5f88\u591a\u5e94\u7528\uff0c\u5b9e\u9645\u4e0a\uff0c\u5b83\u662f\u5bf9\u4e00\u4e2a\u300c\u6709\u4e00\u5b9a\u81ea\u4e3b\u610f\u8bc6\u53ef\u4ee5\u72ec\u7acb\u91c7\u53d6\u884c\u52a8\u7684\u4ee3\u7406\u4eba\u300d\u7684\u62bd\u8c61\u3002</p> <p>\u7ecf\u6d4e\u6216\u8005\u5546\u4e1a\u9886\u57df\u6709\u300c\u4ee3\u7406\u4eba\u300d\u548c\u300c\u59d4\u6258\u4eba\u300d\u7684\u5173\u7cfb\uff0c\u653f\u6cbb\u6216\u8005\u56fd\u9645\u5173\u7cfb\u4e0a\u4e5f\u6709\u53ef\u4ee5\u300c\u673a\u52a8\u884c\u4e8b\u300d\u7684\u5916\u4ea4\u5b98\u6216\u7279\u4f7f\uff0c\u8ba1\u7b97\u673a\u7279\u522b\u662f AI \u9886\u57df\u91cc\uff0cAgent \u5219\u6307\u4ee3\u53ef\u4ee5\u611f\u77e5\u5176\u73af\u5883\u5e76\u6839\u636e\u8be5\u73af\u5883\u81ea\u4e3b\u884c\u52a8\u4ee5\u8fbe\u6210\u5176\u76ee\u6807\u7684\u7cfb\u7edf\u6216\u8f6f\u4ef6\u5b9e\u4f53\uff0c\u5176\u53ef\u4ee5\u662f\u7b80\u5355\u7684\u8f6f\u4ef6\u7a0b\u5e8f\uff0c\u4e5f\u53ef\u4ee5\u662f\u590d\u6742\u7684\u673a\u5668\u4eba\u3002</p> <p>\u6cbf\u7740\u8fd9\u4e2a\u8def\u5f84\uff0c\u4e5f\u6709\u4e00\u4e9b\u5728\u4e0d\u540c\u884c\u4e1a\u91cc\u5bf9 Agent \u8fdb\u884c\u5efa\u6a21\u7684\u7406\u8bba\u3002</p> <p>\u4ee3\u7406\u7406\u8bba\uff08Principal-Agent Theory\uff09\u4e3b\u8981\u7528\u4e8e\u7ecf\u6d4e\u5b66\u548c\u7ba1\u7406\u5b66\uff0c\u63a2\u8ba8\u5f53\u4e00\u4e2a\u4eba\uff08\u4ee3\u7406\u4eba\uff09\u4ee3\u8868\u53e6\u4e00\u4e2a\u4eba\uff08\u59d4\u6258\u4eba\uff09\u884c\u4e8b\u65f6\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\u3002\u6838\u5fc3\u95ee\u9898\u662f\u4fe1\u606f\u4e0d\u5bf9\u79f0\u548c\u5229\u76ca\u51b2\u7a81\u3002\u6570\u5b66\u4e0a\uff0c\u901a\u5e38\u901a\u8fc7\u6784\u5efa\u4e00\u4e2a\u6700\u4f18\u5316\u6a21\u578b\u6765\u5904\u7406\uff0c\u5176\u4e2d\uff0c\u59d4\u6258\u4eba\u8bbe\u8ba1\u4e00\u4e2a\u6fc0\u52b1\u673a\u5236\uff08\u5982\u5de5\u8d44\u3001\u5956\u91d1\u7b49\uff09\uff0c\u4ee5\u6700\u5927\u5316\u5176\u81ea\u8eab\u7684\u6548\u7528\uff0c\u540c\u65f6\u4e5f\u8003\u8651\u5230\u4ee3\u7406\u4eba\u7684\u884c\u4e3a\u53cd\u5e94\u3002</p> <p>\u535a\u5f08\u8bba\u662f\u7814\u7a76\u5177\u6709\u51b2\u7a81\u548c\u5408\u4f5c\u52a8\u673a\u7684\u7406\u6027\u51b3\u7b56\u8005\uff08Agent\uff09\u4e4b\u95f4\u4e92\u52a8\u7684\u6570\u5b66\u7406\u8bba\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u6a21\u578b\uff0c\u7528\u4e8e\u5206\u6790\u591a\u4e2a Agent \u5728\u7279\u5b9a\u89c4\u5219\u4e0b\u7684\u7b56\u7565\u9009\u62e9\u3002\u5176\u4e2d\uff0c\u535a\u5f08\u53ef\u4ee5\u662f\u5408\u4f5c\u7684\u6216\u975e\u5408\u4f5c\u7684\uff0c\u4fe1\u606f\u53ef\u4ee5\u662f\u5b8c\u5168\u7684\u6216\u4e0d\u5b8c\u5168\u7684\u3002</p> <ul> <li>\u7eb3\u4ec0\u5747\u8861\uff1a\u5728\u975e\u5408\u4f5c\u535a\u5f08\u4e2d\uff0c\u7eb3\u4ec0\u5747\u8861\u662f\u6bcf\u4e2a\u73a9\u5bb6\u9009\u62e9\u7b56\u7565\u7684\u4e00\u79cd\u72b6\u6001\uff0c\u4e14\u65e0\u4e00\u73a9\u5bb6\u80fd\u901a\u8fc7\u6539\u53d8\u7b56\u7565\u5355\u72ec\u83b7\u5f97\u66f4\u597d\u7684\u7ed3\u679c\u3002</li> <li>\u91cd\u590d\u535a\u5f08\u4e0e\u6f14\u5316\u535a\u5f08\uff1a\u8003\u8651\u5728\u591a\u6b21\u4e92\u52a8\u4e2d\u7b56\u7565\u5982\u4f55\u6f14\u5316\u3002</li> </ul> <p>\u51b3\u7b56\u7406\u8bba\u6d89\u53ca\u4ee3\u7406\u4eba\u5728\u4e0d\u786e\u5b9a\u6027\u4e0b\u5982\u4f55\u505a\u51fa\u6700\u4f18\u9009\u62e9\u7684\u7814\u7a76\uff0c\u901a\u5e38\u6d89\u53ca\u5230\u6982\u7387\u8bba\u548c\u7edf\u8ba1\u51b3\u7b56\u7406\u8bba\u3002</p> <ul> <li>\u671f\u671b\u6548\u7528\u7406\u8bba\uff1a\u4ee3\u7406\u4eba\u6839\u636e\u5176\u6548\u7528\u51fd\u6570\u548c\u5404\u79cd\u884c\u52a8\u7ed3\u679c\u7684\u6982\u7387\u52a0\u6743\u5e73\u5747\u6765\u9009\u62e9\u884c\u52a8\u3002</li> <li>\u8d1d\u53f6\u65af\u51b3\u7b56\u7406\u8bba\uff1a\u5728\u4fe1\u606f\u4e0d\u5b8c\u5168\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7406\u4eba\u5982\u4f55\u5229\u7528\u5148\u9a8c\u77e5\u8bc6\u548c\u89c2\u6d4b\u6570\u636e\u66f4\u65b0\u5176\u4fe1\u5ff5\uff0c\u5e76\u505a\u51fa\u51b3\u7b56\u3002</li> </ul>"},{"location":"AI/LLMs/multi-agent/#markov-decision-process","title":"Markov decision process","text":"<p>\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u7684 Agent \u6a21\u578b\u901a\u5e38\u901a\u8fc7\u7b97\u6cd5\u548c\u8ba1\u7b97\u65b9\u6cd5\u6765\u5b9e\u73b0\uff0c\u4f8b\u5982\u9a6c\u5c14\u53ef\u592b\u51b3\u7b56\u8fc7\u7a0b\uff08Markov decision process, MDP\uff09\uff0c\u7528\u4e8e\u6a21\u62df\u5728\u4e0d\u786e\u5b9a\u73af\u5883\u4e2d\u7684\u51b3\u7b56\u8fc7\u7a0b\u3002Agent \u57fa\u4e8e\u5f53\u524d\u72b6\u6001\u548c\u53ef\u80fd\u7684\u8f6c\u79fb\u6982\u7387\u6765\u9009\u62e9\u884c\u52a8\uff0c\u4ee5\u6700\u5927\u5316\u957f\u671f\u56de\u62a5\u3002</p> <p>\u5177\u4f53\u5730\uff0cMDP \u662f\u4e00\u79cd\u6570\u5b66\u6846\u67b6\uff0c\u7528\u4e8e\u5efa\u6a21\u51b3\u7b56\u5236\u5b9a\u8fc7\u7a0b\uff0c\u5176\u7ed3\u679c\u4f9d\u8d56\u4e8e\u51b3\u7b56\u8005\u7684\u884c\u4e3a\uff0c\u5e76\u4e14\u90e8\u5206\u4f9d\u8d56\u4e8e\u968f\u673a\u56e0\u7d20\u3002MDP \u662f\u5f3a\u5316\u5b66\u4e60\u548c\u5176\u4ed6\u591a\u79cd\u7b97\u6cd5\u7684\u57fa\u7840\uff0c\u7279\u522b\u9002\u7528\u4e8e\u90a3\u4e9b\u53ef\u4ee5\u901a\u8fc7\u72b6\u6001\u3001\u884c\u52a8\u548c\u5956\u52b1\u6765\u63cf\u8ff0\u7684\u95ee\u9898\u3002\u5f3a\u5316\u5b66\u4e60\u662f\u4e00\u79cd\u673a\u5668\u5b66\u4e60\u65b9\u6cd5\uff0c\u5176\u4e2d\u4e00\u4e2a Agent \u901a\u8fc7\u4e0e\u73af\u5883\u4ea4\u4e92\u6765\u5b66\u4e60\u5982\u4f55\u6700\u5927\u5316\u67d0\u79cd\u7d2f\u79ef\u5956\u52b1\uff0c\u4f7f\u7528 MDP \u4f5c\u4e3a\u5176\u7406\u8bba\u57fa\u7840\uff0c\u4f46\u5f3a\u8c03\u7684\u662f\u5728\u6ca1\u6709\u5b8c\u6574\u73af\u5883\u6a21\u578b\u7684\u60c5\u51b5\u4e0b\u5b66\u4e60\u6700\u4f18\u7b56\u7565\u3002</p> <p>MDP \u7684\u7ec4\u6210\u5143\u7d20\uff1a</p> <ol> <li>\u72b6\u6001\u7a7a\u95f4\uff08S\uff09\uff1a\u4ee3\u8868\u6240\u6709\u53ef\u80fd\u7684\u73af\u5883\u72b6\u6001\u3002</li> <li>\u884c\u52a8\u7a7a\u95f4\uff08A\uff09\uff1a\u5728\u7ed9\u5b9a\u72b6\u6001\u4e0b\uff0cAgent \u53ef\u4ee5\u9009\u62e9\u7684\u6240\u6709\u53ef\u80fd\u884c\u52a8\u3002</li> <li>\u8f6c\u79fb\u6982\u7387\uff08P\uff09\uff1a\\(P(s'|s, a)\\) \u8868\u793a\u5728\u72b6\u6001 \\(s\\) \u4e0b\u91c7\u53d6\u884c\u52a8 \\(a\\) \u540e\u8f6c\u79fb\u5230\u72b6\u6001 \\(s'\\) \u7684\u6982\u7387\u3002</li> <li>\u5956\u52b1\u51fd\u6570\uff08R\uff09\uff1a\\(R(s, a)\\) \u8868\u793a\u5728\u72b6\u6001 \\(s\\) \u4e0b\u91c7\u53d6\u884c\u52a8 \\(a\\) \u6240\u83b7\u5f97\u7684\u5373\u65f6\u5956\u52b1\u3002</li> </ol> <p>MDP \u7684\u76ee\u6807\u662f\u627e\u5230\u4e00\u4e2a\u7b56\u7565 \\(\\pi\\)\uff0c\u4e3a\u6bcf\u4e2a\u72b6\u6001 \\(s\\) \u6307\u5b9a\u4e00\u4e2a\u884c\u52a8 \\(a\\)\uff0c\u4ee5\u6700\u5927\u5316\u9884\u671f\u7684\u7d2f\u79ef\u5956\u52b1\uff0c\u901a\u5e38\u662f\u6298\u6263\u5956\u52b1\u7684\u603b\u548c\uff0c\u5373\uff1a $$ V^\\pi(s) = \\mathbb{E}\\left[\\sum_{t=0}^\\infty \\gamma^t R(s_t, a_t) \\mid s_0 = s, \\pi\\right] $$ \u5176\u4e2d\uff0c\\(\\gamma\\) \u662f\u6298\u6263\u56e0\u5b50\uff0c\u4ecb\u4e8e 0 \u548c 1 \u4e4b\u95f4\uff0c\u7528\u4e8e\u8c03\u6574\u672a\u6765\u5956\u52b1\u7684\u5f53\u524d\u4ef7\u503c\u3002\\(V^\\pi(s)\\) \u8868\u793a\u5728\u7ed9\u5b9a\u7b56\u7565 \\(\\pi\\) \u4e0b\uff0c\u4ece\u72b6\u6001 \\(s\\) \u5f00\u59cb\u7684\u9884\u671f\u7d2f\u79ef\u6298\u6263\u5956\u52b1\u3002\u6211\u4eec\u9010\u9879\u89e3\u6790\u8fd9\u4e2a\u5f0f\u5b50\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u7406\u89e3\u5b83\u7684\u6570\u5b66\u542b\u4e49\u548c\u5b9e\u9645\u610f\u4e49\uff1a</p> <ol> <li> <p>\\(s_0 = s\\)\uff1a\u8868\u793a\u8003\u8651\u7684\u8d77\u59cb\u72b6\u6001\u662f \\(s\\)\u3002\u6211\u4eec\u60f3\u8981\u8bc4\u4f30\u4ece\u8fd9\u4e2a\u7279\u5b9a\u72b6\u6001\u5f00\u59cb\uff0c\u9075\u5faa\u7b56\u7565 \\(\\pi\\) \u65f6\u7684\u957f\u671f\u8868\u73b0\u3002</p> </li> <li> <p>\u7b56\u7565 \\(\\pi\\)\uff1a\u662f\u4e00\u4e2a\u4ece\u72b6\u6001\u5230\u884c\u52a8\u7684\u6620\u5c04\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72b6\u6001 \\(s\\)\uff0c\u7b56\u7565 \\(\\pi\\) \u6307\u5b9a\u4e00\u4e2a\u884c\u52a8 \\(a\\)\uff0c\u5373 \\(\\pi(s) = a\\)\uff0c\\(\\pi\\) \u51b3\u5b9a\u4e86\u5728\u6bcf\u4e2a\u72b6\u6001\u4e0b\u5e94\u9009\u62e9\u54ea\u4e2a\u884c\u52a8\u3002</p> </li> <li> <p>\\(\\sum_{t=0}^\\infty \\gamma^t R(s_t, a_t)\\)\uff1a</p> <ul> <li>\u6c42\u548c\u7b26\u53f7 \\(\\sum\\)\uff1a\u8868\u793a\u8003\u8651\u6240\u6709\u4ece\u65f6\u95f4 \\(t = 0\\) \u5230\u65e0\u7a77\u7684\u5956\u52b1\u3002</li> <li>\u6298\u6263\u56e0\u5b50 \\(\\gamma^t\\)\uff1a\u4e00\u4e2a\u4ecb\u4e8e 0 \u548c 1 \u4e4b\u95f4\u7684\u6570\uff0c\u8868\u793a\u5956\u52b1\u968f\u65f6\u95f4\u7684\u8870\u51cf\u3002\u6298\u6263\u56e0\u5b50\u7684\u4f5c\u7528\u662f\u4f7f\u5f97\u8fdc\u671f\u5956\u52b1\u7684\u73b0\u503c\u51cf\u5c0f\uff0c\u6709\u52a9\u4e8e\u5956\u52b1\u603b\u548c\u7684\u6536\u655b\uff0c\u5e76\u4e14\u53cd\u6620\u4e86\u672a\u6765\u4e0d\u786e\u5b9a\u6027\u7684\u5f71\u54cd\u3002</li> <li>\u5956\u52b1 \\(R(s_t, a_t)\\)\uff1a\u5728\u65f6\u95f4 \\(t\\)\uff0c\u72b6\u6001\u4e3a \\(s_t\\)\uff0c\u5e76\u91c7\u53d6\u884c\u52a8 \\(a_t\\) \u65f6\u83b7\u5f97\u7684\u5373\u65f6\u5956\u52b1\u3002</li> </ul> </li> <li> <p>\u671f\u671b \\( \\mathbb{E} \\)\uff1a\u8868\u793a\u6b63\u5728\u8ba1\u7b97\u7684\u662f\u671f\u671b\u503c\uff0c\u5373\u5e73\u5747\u610f\u4e49\u4e0a\u7684\u7d2f\u79ef\u6298\u6263\u5956\u52b1\u3002\u671f\u671b\u662f\u8003\u8651\u5230\u6240\u6709\u53ef\u80fd\u7684\u672a\u6765\u72b6\u6001\u5e8f\u5217\uff0c\u6839\u636e\u8f6c\u79fb\u6982\u7387\u548c\u7b56\u7565 \\(\\pi\\) \u7684\u6982\u7387\u5206\u5e03\u6765\u8ba1\u7b97\u7684\u3002</p> </li> </ol> <p>\u5c06\u8fd9\u4e9b\u7ec4\u4ef6\u7ed3\u5408\u8d77\u6765\uff0c\\(V^\\pi(s)\\) \u8868\u793a\u5728\u7b56\u7565 \\(\\pi\\) \u7684\u6307\u5bfc\u4e0b\uff0c\u4ece\u72b6\u6001 \\(s\\) \u5f00\u59cb\uff0c\u671f\u671b\u83b7\u5f97\u7684\u6240\u6709\u672a\u6765\u5956\u52b1\u7684\u6298\u6263\u603b\u548c\u7684\u5e73\u5747\u503c\u3002\u8fd9\u4e2a\u503c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u91cf\u5316\u7684\u5ea6\u91cf\uff0c\u8868\u660e\u9075\u5faa\u7b56\u7565 \\(\\pi\\) \u65f6\uff0c\u4ece\u72b6\u6001 \\(s\\) \u5f00\u59cb\u7684\u957f\u671f\u6548\u7528\u662f\u591a\u5c11\u3002\u901a\u8fc7\u8ba1\u7b97\u548c\u6bd4\u8f83\u4e0d\u540c\u7b56\u7565\u4e0b\u7684 \\(V^\\pi(s)\\) \u503c\uff0c\u53ef\u4ee5\u8bc4\u4f30\u54ea\u4e2a\u7b56\u7565\u5728\u957f\u671f\u5185\u66f4\u6709\u6548\uff0c\u4ece\u800c\u5e2e\u52a9\u9009\u62e9\u6216\u4f18\u5316\u7b56\u7565\u3002</p> <p>\u603b\u4f53\u4e0a\uff0c\u4e00\u4e2a\u826f\u597d\u7684 Agent \u9700\u8981\u53ef\u4ee5\u5728\u590d\u6742\u3001\u4e0d\u786e\u5b9a\u73af\u5883\u4e2d\u8fdb\u884c\u6709\u6548\u51b3\u7b56\u3002</p>"},{"location":"AI/LLMs/multi-agent/#motivation","title":"Motivation","text":"<p>\u5355\u4e2a LLM \u5728\u5904\u7406\u590d\u6742\u4efb\u52a1\u65f6\u5df2\u7ecf\u663e\u793a\u51fa\u4e0d\u53ef\u5c0f\u89d1\u7684\u80fd\u529b\uff0c\u4f46\u5728\u4e00\u4e9b\u590d\u6742\u95ee\u9898\u4e0a\uff0c\u5355\u4e2a LLM \u4f9d\u65e7\u529b\u4e0d\u4ece\u5fc3\u3002\u6b64\u65f6\u4e00\u4e2a\u81ea\u7136\u7684\u8003\u8651\u5c31\u662f\u5c06\u95ee\u9898\u505a modularization\uff0c\u8ba9\u591a\u4e2a LLM \u5206\u522b\u53bb\u89e3\u51b3\u591a\u4e2a\u5b50\u95ee\u9898\uff0c\u5982\u6b64\uff0c\u5373\u53ef\u5c06\u4e00\u4e2a\u590d\u6742\u95ee\u9898\u5206\u89e3\u4e3a\u591a\u4e2a\u5b50\u4efb\u52a1\uff0c\u5206\u522b\u5904\u7406\u3002\u5b8f\u89c2\u6765\u770b\uff0c\u89e3\u51b3\u5355\u4e2a\u5b50\u95ee\u9898\u7684\u5355\u4e2a LLM \u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a Agent\uff08\u81ea\u4e3b\u51b3\u7b56\uff09\u3002</p> <p>\u800c\u4f20\u7edf\u610f\u4e49\u4e0a\u7684 Agent \u5728 LLM \u8bed\u5883\u4e0b\u5e76\u4e0d\u5b8c\u5168\u9002\u7528\u2014\u2014LLM \u8bed\u5883\u4e2d\u7684 Agent \u4e0d\u4ec5\u80fd\u591f\u72ec\u7acb\u4f5c\u51fa\u51b3\u7b56\u548c\u54cd\u5e94\uff0c\u8fd8\u5fc5\u987b\u80fd\u591f\u4e0e\u5176\u4ed6 Agent \u8fdb\u884c\u590d\u6742\u7684\u4ea4\u4e92\u5bf9\u8bdd\uff0c\u8fd9\u5728\u4f20\u7edf\u7684 Agent \u8bbe\u8ba1\u4e2d\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u6240\u4ee5\uff0cLLM \u8bed\u5883\u4e0b\u7684 Agent \u76f8\u5bf9\u6765\u8bf4\u88ab\u8d4b\u4e88\u4e86\u66f4\u5177\u4f53\u7684\u5b9a\u4e49\u548c\u529f\u80fd\uff0c\u7279\u522b\u662f\u5f3a\u8c03\u4e86\u591a\u667a\u80fd\u4f53\u4e4b\u95f4\u7684\u4ea4\u6d41\u548c\u534f\u4f5c\u80fd\u529b\u3002</p> <p>\u4f8b\u5982\uff0cAutoGen \u4e2d\u7684 Agent \u662f\u53ef\u4ee5\u53d1\u9001\u6d88\u606f\u3001\u63a5\u6536\u6d88\u606f\u5e76\u901a\u8fc7\u6a21\u578b\u3001\u5de5\u5177\u6216\u4eba\u7c7b\u8f93\u5165\uff08\u6216\u5b83\u4eec\u7684\u7ec4\u5408\uff09\u751f\u6210\u56de\u590d\u7684\u5b9e\u4f53\u3002\u8fd9\u79cd\u8bbe\u8ba1\u4f7f\u5f97 Agent \u53ef\u4ee5\u6a21\u62df\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\uff08\u5982\u4eba\u7c7b\u3001\u7b97\u6cd5\u7b49\uff09\uff0c\u5e76\u7b80\u5316\u4e86\u4f5c\u4e3a\u667a\u80fd\u4f53\u534f\u4f5c\u7684\u590d\u6742\u5de5\u4f5c\u6d41\u7684\u5b9e\u73b0\u3002</p>"},{"location":"AI/LLMs/multi-agent/#principle","title":"Principle","text":"<p>\u76ee\u524d\u5bf9 LLM Agent \u5efa\u6a21\u7684\u7406\u8bba\u5e76\u4e0d\u591a\uff08\u622a\u81f3 2024 \u5e74 7 \u6708 15 \u53f7\u6211\u7684\u68c0\u7d22\u7ed3\u679c\uff09\uff0c\u8fd9\u4e2a\u6982\u5ff5\u66f4\u591a\u662f\u4e00\u4e2a\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u5de5\u7a0b\u6982\u5ff5\u3002\u8fd9\u91cc\u91c7\u7528 A Survey on Large Language Model based Autonomous Agents \u4e2d\u63d0\u51fa\u7684\u6784\u5efa LLM Agent \u7684\u7edf\u4e00\u7406\u8bba\u6846\u67b6\u3002</p>"},{"location":"AI/LLMs/multi-agent/#construction","title":"Construction","text":"<p>\u7ed3\u6784\u4e0a\uff0cAgent \u53ef\u4ee5\u5206\u4e3a\u56db\u4e2a\u6a21\u5757\uff0c\u5982\u56fe:  </p> <p>\u5176\u4e2d\uff0cProfiling Module \u5b9a\u4e49\u667a\u80fd\u4f53\u7684\u89d2\u8272\u548c\u7279\u5f81\uff0c\u5305\u62ec\u624b\u5de5\u5236\u5b9a\u3001\u57fa\u4e8e LLM \u751f\u6210\u548c\u6570\u636e\u96c6\u5bf9\u9f50\u4e09\u79cd\u65b9\u6cd5\u3002Memory Module \u8bbe\u8ba1\u5185\u5b58\u7ed3\u6784\u6765\u5b58\u50a8\u548c\u56de\u5fc6\u4ee5\u5f80\u7684\u884c\u4e3a\u548c\u73af\u5883\u4fe1\u606f\uff0c\u5305\u62ec\u7edf\u4e00\u5185\u5b58\u548c\u6df7\u5408\u5185\u5b58\u4e24\u79cd\u7ed3\u6784\u3002\u5185\u5b58\u683c\u5f0f\u5305\u62ec\u81ea\u7136\u8bed\u8a00\u3001\u5d4c\u5165\u5f0f\u8868\u793a\u548c\u6570\u636e\u5e93\u3002Planning Module \u5e2e\u52a9\u667a\u80fd\u4f53\u8fdb\u884c\u4efb\u52a1\u5206\u89e3\u548c\u672a\u6765\u884c\u52a8\u7684\u89c4\u5212\uff0c\u5206\u4e3a\u65e0\u53cd\u9988\u89c4\u5212\u548c\u6709\u53cd\u9988\u89c4\u5212\u4e24\u79cd\u7c7b\u578b\u3002Action Module \u8d1f\u8d23\u5c06\u667a\u80fd\u4f53\u7684\u51b3\u7b56\u8f6c\u5316\u4e3a\u5177\u4f53\u884c\u52a8\uff0c\u6d89\u53ca\u884c\u52a8\u7684\u76ee\u6807\u3001\u751f\u6210\u65b9\u5f0f\u3001\u53ef\u7528\u7684\u884c\u52a8\u7a7a\u95f4\u548c\u884c\u52a8\u7684\u5f71\u54cd\u3002</p> <p>\u5404\u4e2a\u6a21\u5757\u7684\u8be6\u7ec6\u4ecb\u7ecd\u89c1\u4e0b\u6587\u3002</p>"},{"location":"AI/LLMs/multi-agent/#profiling-module","title":"Profiling Module","text":"<p>\u8bbe\u7f6e Agent \u7684\u8eab\u4efd\u548c\u884c\u4e3a\u7279\u5f81\u3002\u5305\u62ec\u624b\u5de5\u6307\u5b9a\uff08Handcrafting\uff09\u3001\u57fa\u4e8eLLM\u751f\u6210\uff08LLM-generation\uff09\u3001\u6570\u636e\u96c6\u5bf9\u9f50\uff08Dataset Alignment\uff09\u4e09\u79cd\u65b9\u6cd5\u3002</p> <ul> <li>Handcrafting\uff1a\u624b\u52a8\u8bbe\u5b9a Agent \u7684\u7279\u5f81\u548c\u884c\u4e3a\u3002</li> <li>LLM-generation\uff1a\u5229\u7528 LLM \u81ea\u52a8\u751f\u6210 Agent \u7684\u63cf\u8ff0\u3002</li> <li>Dataset Alignment\uff1a\u901a\u8fc7\u771f\u5b9e\u4e16\u754c\u6570\u636e\u96c6\u6765\u5b9a\u4e49 Agent \u7684\u5c5e\u6027\u3002</li> </ul>"},{"location":"AI/LLMs/multi-agent/#memory-module","title":"Memory Module","text":"<p>\u8bbe\u8ba1\u7528\u4e8e\u5b58\u50a8\u548c\u68c0\u7d22\u8fc7\u53bb\u7684\u884c\u4e3a\u548c\u73af\u5883\u4fe1\u606f\u7684\u7ed3\u6784\uff0c\u5206\u4e3a\u7edf\u4e00\u5185\u5b58\uff08Unified Memory\uff09\u548c\u6df7\u5408\u5185\u5b58\uff08Hybrid Memory\uff09\u3002</p> <ul> <li>\u7edf\u4e00\u5185\u5b58\uff1a\u4ec5\u6a21\u62df\u4eba\u7c7b\u77ed\u671f\u8bb0\u5fc6\uff0c\u901a\u5e38\u901a\u8fc7\u4e0a\u4e0b\u6587\u5b66\u4e60\u5b9e\u73b0\u3002</li> <li>\u6df7\u5408\u5185\u5b58\uff1a\u663e\u5f0f\u6a21\u62df\u77ed\u671f\u548c\u957f\u671f\u8bb0\u5fc6\uff0c\u63d0\u9ad8\u4e86 Agent \u7684\u73af\u5883\u9002\u5e94\u6027\u548c\u884c\u52a8\u4e00\u81f4\u6027\u3002</li> </ul>"},{"location":"AI/LLMs/multi-agent/#planning-module","title":"Planning Module","text":"<p>\u5e2e\u52a9 Agent \u8fdb\u884c\u4efb\u52a1\u5206\u89e3\u548c\u672a\u6765\u884c\u52a8\u7684\u89c4\u5212\uff0c\u5206\u4e3a\u65e0\u53cd\u9988\u89c4\u5212\uff08Planning without Feedback\uff09\u548c\u6709\u53cd\u9988\u89c4\u5212\uff08Planning with Feedback\uff09\u3002</p> <ul> <li>\u65e0\u53cd\u9988\u89c4\u5212\uff1aAgent \u5728\u6ca1\u6709\u5916\u754c\u53cd\u9988\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u6574\u4f53\u8ba1\u5212\u3002</li> <li>\u6709\u53cd\u9988\u89c4\u5212\uff1aAgent \u5728\u884c\u52a8\u540e\u6839\u636e\u5916\u754c\u53cd\u9988\u8c03\u6574\u8ba1\u5212\u3002</li> </ul>"},{"location":"AI/LLMs/multi-agent/#action-module","title":"Action Module","text":"<p>\u8d1f\u8d23\u5c06\u51b3\u7b56\u8f6c\u5316\u4e3a\u5177\u4f53\u884c\u52a8\uff0c\u6d89\u53ca\u884c\u52a8\u7684\u76ee\u6807\u3001\u751f\u6210\u65b9\u5f0f\u3001\u53ef\u7528\u7684\u884c\u52a8\u7a7a\u95f4\u548c\u884c\u52a8\u7684\u5f71\u54cd\u3002</p>"},{"location":"AI/LLMs/multi-agent/#capability-acquisition","title":"Capability Acquisition","text":"<p>\u4ee5\u4e0a\u662f\u5728\u67b6\u6784\u5c42\u9762\u5bf9 Agent \u8fdb\u884c\u5efa\u6a21\uff0c\u53ef\u4ee5\u89c6\u4f5c\u662f\u5f71\u54cd Agent \u7684\u300c\u786c\u4ef6\u300d\uff0c\u4f46\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u300c\u8f6f\u4ef6\u300d\u7684\u65b9\u5f0f\u6765\u8d4b\u80fd Agent \u66f4\u5f3a\u7684\u80fd\u529b\u3002\u5176\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u5fae\u8c03\u83b7\u5f97\u80fd\u529b\uff0c\u4f7f\u7528\u57fa\u4e8e\u4eba\u7c7b\u6ce8\u91ca\u3001LLM\u751f\u6210\u7684\u6570\u636e\u96c6\u6216\u771f\u5b9e\u4e16\u754c\u6570\u636e\u96c6\u5fae\u8c03 LLM\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u901a\u8fc7\u5fae\u8c03\u83b7\u5f97\u80fd\u529b\uff0c\u5305\u62ec\u63d0\u793a\u5de5\u7a0b\uff08Prompt Engineering\uff09\u548c Agent \u4ea4\u4e92\u673a\u5236\uff08Mechanism Engineering\uff09\u4e24\u79cd\u7b56\u7565\uff0c\u65e8\u5728\u901a\u8fc7\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u63d0\u793a\u6216 Agent \u4ea4\u4e92\u673a\u5236\u6765\u63d0\u5347 Agent \u7684\u80fd\u529b\u3002</p>"},{"location":"AI/LLMs/multi-agent/#evaluation","title":"Evaluation","text":""},{"location":"AI/LLMs/multi-agent/#subjective-evaluation","title":"Subjective Evaluation","text":"<ul> <li>Human Annotation\uff1a\u4eba\u7c7b\u8bc4\u5ba1\u5458\u5bf9 Agent \u7684\u8f93\u51fa\u8fdb\u884c\u8bc4\u4ef7\u3002</li> <li>Turing Test\uff1a\u6d4b\u8bd5 Agent \u7684\u8f93\u51fa\u662f\u5426\u80fd\u4e0e\u4eba\u7c7b\u8f93\u51fa\u96be\u4ee5\u533a\u5206\uff0c\u4ee5\u8bc4\u4f30\u5176\u4eba\u7c7b\u6c34\u5e73\u7684\u8868\u73b0\u80fd\u529b\u3002</li> </ul>"},{"location":"AI/LLMs/multi-agent/#objective-evaluation","title":"Objective Evaluation","text":"<ul> <li>Metrics (\u8bc4\u4f30\u6307\u6807)\uff1a\u5305\u62ec\u4efb\u52a1\u6210\u529f\u7387\u3001\u4e0e\u4eba\u7c7b\u884c\u4e3a\u7684\u76f8\u4f3c\u5ea6\u3001\u6548\u7387\u7b49\u3002</li> <li>Protocols (\u8bc4\u4f30\u534f\u8bae)\uff1a\u5305\u62ec\u771f\u5b9e\u4e16\u754c\u6a21\u62df\u3001\u793e\u4f1a\u8bc4\u4ef7\u3001\u591a\u4efb\u52a1\u8bc4\u4ef7\u548c\u8f6f\u4ef6\u6d4b\u8bd5\u7b49\u3002</li> <li>Benchmarks (\u57fa\u51c6\u6d4b\u8bd5)\uff1a\u4f7f\u7528\u7279\u5b9a\u7684\u57fa\u51c6\u6d4b\u8bd5\u96c6\u6765\u7cfb\u7edf\u5730\u8bc4\u4f30 Agent \u6027\u80fd\uff0c\u5982ALFWorld\u3001IGLU\u7b49\u3002</li> </ul>"},{"location":"AI/LLMs/multi-agent/#implementationautogen","title":"Implementation\uff08AutoGen\uff09","text":"<p>\u4e0a\u9762\u4e86\u89e3\u4e86 Multi-Agent \u7684\u7406\u8bba\u80cc\u666f\uff0c\u4f46\u5b9e\u9645\u5f00\u53d1\u4e2d\u6211\u4eec\u5f80\u5f80\u4e0d\u4f1a\u81ea\u884c\u5f00\u53d1 infra\uff0c\u8fd8\u662f\u4f1a\u91c7\u7528\u65b9\u4fbf\u914d\u7f6e\u7684 Multi-Agent \u6846\u67b6\u3002\u76ee\u524d\u4f18\u79c0\u7684\u6846\u67b6\u5df2\u7ecf\u6709\u5f88\u591a\uff0c\u50cf\u662f AutoGPT \u548c MetaGPT \u7b49\u7b49\uff0c\u751a\u81f3\u8fd8\u6709\u56fe\u5f62\u5316\u7684 LangGraph\u3001Dify \u548c Coze \u7b49\u7b49\uff0c\u8fd9\u91cc\u6211\u4ee5\u5fae\u8f6f\u7684 AutoGen \u4e3a\u4f8b\uff0c\u505a\u4e00\u4e2a\u7c97\u7565\u7684\u5b9e\u73b0\u673a\u5236\u7684\u4ecb\u7ecd\uff0c\u5176\u5b9e\u5404\u4e2a\u6846\u67b6\u57fa\u672c\u90fd\u662f\u5927\u540c\u5c0f\u5f02\u3002</p> <p>AutoGen \u4e2d\uff0c\u4e0a\u8ff0\u7279\u70b9\u5177\u4f53\u4f53\u73b0\u5728\u4ee3\u7801\u7684\u7c7b\uff08classes\uff09\u3001\u53c2\u6570\uff08parameters\uff09\u548c\u65b9\u6cd5\uff08methods\uff09\u4e2d\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>ConversableAgent \u7c7b\uff1aAutoGen \u4e2d\u6240\u6709 Agent \u7684\u57fa\u7c7b\uff0c\u63d0\u4f9b\u4e86\u57fa\u7840\u7684\u6d88\u606f\u53d1\u9001\uff08<code>send</code>\uff09\u3001\u63a5\u6536\uff08<code>receive</code>\uff09\u548c\u56de\u590d\u751f\u6210\uff08<code>generate_reply</code>\uff09\u7684\u65b9\u6cd5\uff0c\u4f7f\u5f97 Agent \u80fd\u591f\u53c2\u4e0e\u5230\u5bf9\u8bdd\u4e2d\uff0c\u4e0e\u5176\u4ed6 Agent \u6216\u7528\u6237\u4ea4\u4e92\u3002</p> <pre><code>from autogen import ConversableAgent\n\n# \u521b\u5efa\u4e00\u4e2a\u53ef\u5bf9\u8bdd\u7684Agent\uff0c\u914d\u7f6e\u5176LLM\u6a21\u578b\u548c\u4eba\u7c7b\u8f93\u5165\u6a21\u5f0f\nagent = ConversableAgent(\n    name=\"example_agent\",\n    llm_config={\"config_list\": [{\"model\": \"gpt-4\", \"api_key\": os.environ.get(\"OPENAI_API_KEY\")}]},\n    human_input_mode=\"NEVER\"  # \u6b64Agent\u4e0d\u9700\u8981\u4eba\u7c7b\u8f93\u5165\n)\n</code></pre> <p>\u5b9a\u5236\u53c2\u6570\u548c\u65b9\u6cd5\uff1a<code>human_input_mode</code>\uff1a\u4e00\u4e2a\u914d\u7f6e\u53c2\u6570\uff0c\u652f\u6301\u5f00\u53d1\u8005\u8bbe\u5b9a Agent \u662f\u81ea\u52a8\u8fd0\u884c\uff08<code>NEVER</code>\uff09\uff0c\u8fd8\u662f\u5728\u67d0\u4e9b\u64cd\u4f5c\u524d\u9700\u8981\u4eba\u7c7b\u8f93\u5165\uff08<code>ALWAYS</code> \u6216\u8005\u6761\u4ef6\u6027\u89e6\u53d1\uff09\u3002<code>code_execution_config</code>\uff1a\u652f\u6301 Agent \u6267\u884c\u4ee3\u7801\uff0c\u901a\u5e38\u7528\u4e8e\u9700\u8981 Agent \u64cd\u4f5c\u5916\u90e8\u8f6f\u4ef6\u6216\u5de5\u5177\u7684\u573a\u666f\u3002</p> <pre><code># \u4e3aAgent\u6ce8\u518c\u5de5\u5177\u8c03\u7528\u529f\u80fd\ndef calculator(a, b, operator):\n    if operator == '+':\n        return a + b\n    # \u5176\u4ed6\u64cd\u4f5c\u7701\u7565...\n\n# \u6ce8\u518c\u5de5\u5177\nagent.register_for_llm(name=\"calculator\", description=\"A simple calculator\")(calculator)\nagent.register_for_execution(name=\"calculator\")(calculator)\n</code></pre> <p>\u534f\u4f5c\u673a\u5236\uff1a<code>register_reply</code> \u548c <code>initiate_chat</code> \u65b9\u6cd5\uff1a\u5141\u8bb8 Agent \u6ce8\u518c\u54cd\u5e94\u51fd\u6570\u548c\u542f\u52a8\u4e0e\u5176\u4ed6 Agent \u7684\u5bf9\u8bdd\uff0c\u662f\u5b9e\u73b0\u591a Agent \u534f\u4f5c\u7684\u6838\u5fc3\u3002 <pre><code># \u521b\u5efa\u53e6\u4e00\u4e2aAgent\u4f5c\u4e3a\u5bf9\u8bdd\u4f19\u4f34\npartner_agent = ConversableAgent(\n    name=\"partner\",\n    llm_config={\"config_list\": [{\"model\": \"gpt-4\", \"api_key\": os.environ.get(\"OPENAI_API_KEY\")}]},\n    human_input_mode=\"ALWAYS\"  # \u6b64Agent\u603b\u662f\u9700\u8981\u4eba\u7c7b\u8f93\u5165\n)\n\n# \u521d\u59cb\u5316\u5bf9\u8bdd\nresult = agent.initiate_chat(\n    partner=partner_agent,\n    message=\"Let's start a conversation.\",\n    max_turns=5  # \u8bbe\u7f6e\u6700\u5927\u5bf9\u8bdd\u8f6e\u6570\n)\n</code></pre></p> <p>\u5c42\u6b21\u5316\u548c\u52a8\u6001\u4ea4\u4e92\uff1a\u53ef\u4ee5\u521b\u5efa\u5305\u542b\u591a\u4e2a Agent \u7684\u590d\u6742\u7ed3\u6784\uff0c\u5176\u4e2d\u9ad8\u7ea7 Agent \u53ef\u4ee5\u7ba1\u7406\u5176\u4ed6 Agent\uff0c\u5e76\u6839\u636e\u60c5\u51b5\u52a8\u6001\u8c03\u6574\u7b56\u7565\uff0c\u901a\u5e38\u901a\u8fc7\u5728\u9ad8\u7ea7 Agent \u4e2d\u7f16\u5199\u7ba1\u7406\u903b\u8f91\u6765\u5b9e\u73b0\uff0c\u5229\u7528 <code>send</code> \u548c <code>receive</code> \u65b9\u6cd5\u6765\u534f\u8c03\u5b50 Agent \u7684\u884c\u52a8\u3002 <pre><code># \u5728\u66f4\u9ad8\u7ea7\u7684\u5e94\u7528\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2aAgent\u6765\u534f\u8c03\u5176\u4ed6\u591a\u4e2aAgent\nmanager = ConversableAgent(\n    name=\"manager\",\n    llm_config={\"config_list\": [{\"model\": \"gpt-4\"}]},\n    human_input_mode=\"ALWAYS\"\n)\n\n# \u7ba1\u7406\u591a\u4e2a\u5b50Agent\uff0c\u793a\u4f8b\u4e2d\u53ea\u5c55\u793a\u4e86\u521d\u59cb\u5316\u90e8\u5206\nsub_agent1 = ConversableAgent(\"sub_agent1\", llm_config={\"config_list\": [{\"model\": \"gpt-4\"}]})\nsub_agent2 = ConversableAgent(\"sub_agent2\", llm_config={\"config_list\": [{\"model\": \"gpt-4\"}]})\n\n# \u5047\u8bbe\u5b58\u5728\u4e00\u4e2a\u590d\u6742\u4efb\u52a1\u9700\u8981\u8fd9\u4e9bAgent\u5408\u4f5c\u5b8c\u6210\ntask_message = \"Please collaborate to solve this problem.\"\nmanager.initiate_chat(partner=sub_agent1, message=task_message)\nmanager.initiate_chat(partner=sub_agent2, message=task_message)\n</code></pre></p>"},{"location":"AI/LLMs/multi-agent/#more","title":"More","text":"<ol> <li> <p>A Survey on Large Language Model based Autonomous Agents</p> <p>Submitted on 22 Aug 2023 (v 1), last revised 4 Apr 2024 (this version, v 5)</p> </li> <li> <p>The Rise and Potential of Large Language Model Based Agents: A Survey</p> <p>Submitted on 14 Sep 2023 (v 1), last revised 19 Sep 2023 (this version, v 3)</p> </li> <li> <p>AutoGen: Enabling Next-Gen LLM Applications via Multi-Agent Conversation</p> <p>Submitted on 16 Aug 2023 (v1), last revised 3 Oct 2023 (this version, v 2)</p> </li> <li> <p>https://microsoft.github.io/autogen/</p> </li> </ol>"},{"location":"AI/LLMs/rag/","title":"RAG","text":""},{"location":"AI/LLMs/rag/#motivation","title":"Motivation","text":"<p>\u4f20\u7edf\u751f\u6210\u5f0f\u6a21\u578b\u53ef\u4ee5\u6839\u636e\u5176\u8bad\u7ec3\u8bed\u6599\u6765\u751f\u6210\u8fde\u7eed\u7684\u6587\u672c\uff0c\u4f46\u5728\u5904\u7406\u9700\u8981\u5927\u91cf\u7279\u5b9a\u80cc\u666f\u4fe1\u606f\u7684\u4efb\u52a1\u65f6\uff0c\u8bad\u7ec3\u65f6\u7684\u6570\u636e\u96c6\u5c31\u529b\u4e0d\u4ece\u5fc3\u4e86\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4e00\u79cd\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u4f7f\u5927\u6a21\u578b\u65b9\u4fbf\u4e14\u6709\u6548\u5730\u7ed3\u5408\u5916\u90e8\u4fe1\u606f\uff0c\u8fdb\u800c\u4ea7\u51fa\u66f4\u9ad8\u8d28\u91cf\u7684\u56de\u7b54\uff0c\u8fd9\u5c31\u662f RAG\uff0c\u4e5f\u6709\u4eba\u628a\u5b83\u53eb\u505a\u300c\u5916\u6302\u77e5\u8bc6\u5e93\u300d\u3002</p>"},{"location":"AI/LLMs/rag/#principle","title":"Principle","text":"<p>RAG\uff0cRetrieval-augmented generation\uff0c\u68c0\u7d22\u589e\u5f3a\u751f\u6210\u3002</p> <p>RAG \u57fa\u4e8e\u4e24\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a\u68c0\u7d22\u5668\uff08Retriever\uff09\u548c\u751f\u6210\u5668\uff08Generator\uff09\u3002\u68c0\u7d22\u5668\u8d1f\u8d23\u4ece\u4e00\u4e2a\u5927\u578b\u7684\u6587\u6863\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u51fa\u4e0e\u8f93\u5165\u67e5\u8be2\u6700\u76f8\u5173\u7684\u6587\u6863\u6216\u4fe1\u606f\u7247\u6bb5\uff0c\u800c\u751f\u6210\u5668\uff08\u5b9e\u9645\u4e0a\u5c31\u662f\u5927\u6a21\u578b\uff09\u5219\u57fa\u4e8e\u8fd9\u4e9b\u68c0\u7d22\u5230\u7684\u6587\u6863\u751f\u6210\u6700\u7ec8\u7684\u56de\u7b54\u6216\u5185\u5bb9\u3002</p> <p>\u7ed9\u5b9a\u4e00\u4e2a\u67e5\u8be2\uff08Prompt\uff09\\(q\\)\uff0c\u68c0\u7d22\u5668\u9996\u5148\u4ece\u6570\u636e\u5e93 \\(D\\) \u4e2d\u627e\u5230 \\(k\\) \u4e2a\u6700\u76f8\u5173\u7684\u6587\u6863 \\(\\{d_1, d_2, ..., d_k\\}\\)\u3002\u7136\u540e\uff0c\u751f\u6210\u6a21\u578b\u5c06\u67e5\u8be2 \\(q\\) \u548c\u68c0\u7d22\u5230\u7684\u6587\u6863 \\(\\{d_1, d_2, ..., d_k\\}\\) \u4f5c\u4e3a\u8f93\u5165\uff0c\u751f\u6210\u56de\u7b54 \\(a\\)\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5373\uff1a</p> \\[ P(a|q) = \\sum_{i=1}^{k} P(a|q, d_i)P(d_i|q) \\tag{1} \\] <p>\u5176\u4e2d\uff0c\\(P(d_i|q)\\) \u8868\u793a\u6587\u6863 \\(d_i\\) \u5728\u7ed9\u5b9a\u67e5\u8be2 \\(q\\) \u65f6\u7684\u76f8\u5173\u6027\u6982\u7387\uff0c\u800c \\(P(a|q, d_i)\\) \u5219\u662f\u7ed9\u5b9a\u67e5\u8be2\u548c\u6587\u6863 \\(d_i\\) \u65f6\u751f\u6210\u56de\u7b54 \\(a\\) \u7684\u6982\u7387\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u8865\u70b9\u6570\u5b66\u8bfe\u3002\u4e3a\u4ec0\u4e48 \\((1)\\) \u7528\u6982\u7387\u5f62\u5f0f\u6765\u8868\u793a RAG \u7684\u8fc7\u7a0b\u5462\uff1f</p> <p>\u5148\u5c1d\u8bd5\u7406\u89e3 \\((1)\\)\uff1a\u8ba1\u7b97\u7ed9\u5b9a\u4e00\u4e2a\u67e5\u8be2 \\(q\\) \u65f6\uff0c\u751f\u6210\u56de\u7b54 \\(a\\) \u7684\u6982\u7387\uff0c\u800c\u8fd9\u4e2a\u6982\u7387 \\(P(a|q)\\) \u901a\u8fc7\u4e24\u4e2a\u4e3b\u8981\u90e8\u5206\u7ec4\u5408\u800c\u6210\uff1a</p> <ul> <li>\\(P(d_i|q)\\)\uff1a\u7ed9\u5b9a\u67e5\u8be2 \\(q\\) \u65f6\uff0c\u6587\u6863 \\(d_i\\) \u88ab\u68c0\u7d22\u51fa\u6765\u7684\u6982\u7387\u3002\u68c0\u7d22\u5668\u7684\u4efb\u52a1\u662f\u4ece\u5927\u91cf\u7684\u6587\u6863\u4e2d\u627e\u5230\u4e0e\u67e5\u8be2\u6700\u76f8\u5173\u7684\u6587\u6863\uff0c\u800c \\(P(d_i|q)\\) \u5219\u53cd\u6620\u4e86\u6bcf\u4e2a\u6587\u6863\u4e0e\u67e5\u8be2\u7684\u76f8\u5173\u6027\u3002</li> </ul> <p>\u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u53ef\u9009\u7528\u4e0d\u540c\u7684\u68c0\u7d22\u6a21\u578b\u6765\u83b7\u53d6 \\(P(d_i|q)\\)\uff0c\u6bd4\u5982\u57fa\u4e8e\u5411\u91cf\u7684\u76f8\u4f3c\u6027\u8ba1\u7b97\uff08\u5982\u4f7f\u7528 BERT embeddings \u8fdb\u884c\u4f59\u5f26\u76f8\u4f3c\u5ea6\u8ba1\u7b97\uff09\u3002</p> <ul> <li>\\(P(a|q, d_i)\\)\uff1a\u7ed9\u5b9a\u67e5\u8be2 \\(q\\) \u548c\u68c0\u7d22\u5230\u7684\u6587\u6863 \\(d_i\\) \u7684\u60c5\u51b5\u4e0b\uff0c\u751f\u6210\u56de\u7b54 \\(a\\) \u7684\u6982\u7387\u3002\u751f\u6210\u5668\uff08\u5982GPT\uff09\u4f1a\u8003\u8651\u67e5\u8be2\u548c\u68c0\u7d22\u5230\u7684\u6587\u6863\u7684\u4fe1\u606f\uff0c\u6765\u751f\u6210\u4e00\u4e2a\u5408\u9002\u7684\u56de\u7b54\u3002</li> </ul> <p>\u8fd9\u4e2a\u90e8\u5206\u5176\u5b9e\u5c31\u53cd\u6620\u4e86\u5927\u6a21\u578b\u5229\u7528\u68c0\u7d22\u5230\u7684\u6587\u6863\u4fe1\u606f\u6765\u63d0\u9ad8\u751f\u6210\u56de\u7b54\u8d28\u91cf\u7684\u8fc7\u7a0b\u3002</p> <p>\u6700\u540e\uff0c\u6574\u4e2a\u8868\u8fbe\u5f0f\u518d\u5bf9\u4e00\u5171 \\(k\\) \u4e2a\u88ab\u68c0\u7d22\u5230\u7684\u6587\u6863\u7684\u8d21\u732e\u8fdb\u884c\u52a0\u548c\uff0c\u6765\u8ba1\u7b97\u6700\u7ec8\u7684\u56de\u7b54\u6982\u7387\u3002\u52a0\u6743\u548c\u7684\u5f62\u5f0f\u5141\u8bb8\u751f\u6210\u5668\u5728\u751f\u6210\u56de\u7b54\u65f6\u8003\u8651\u5230\u591a\u4e2a\u68c0\u7d22\u5230\u7684\u6587\u6863\uff0c\u800c\u6bcf\u4e2a\u6587\u6863\u7684\u8d21\u732e\u5219\u7531\u5176\u4e0e\u67e5\u8be2\u7684\u76f8\u5173\u6027\u51b3\u5b9a\uff0c\u6574\u4e2a\u8fc7\u7a0b\u4e5f\u53ef\u7406\u89e3\u4e3a\u5bf9\u6a21\u578b\u51b3\u7b56\u8fdb\u884c\u5efa\u6a21\u3002</p> <p>Meta\uff08\u5f53\u65f6\u8fd8\u53eb Facebook\uff09\u5728 RAG \u7684\u539f\u59cb\u8bba\u6587 Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks  \u4e2d\u5bf9 RAG \u7684\u539f\u7406\u7ed9\u51fa\u4e86\u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\u3002</p>"},{"location":"AI/LLMs/rag/#implementation","title":"Implementation","text":"<p>\u4e00\u4e2a RAG \u5b9e\u73b0\u793a\u4f8b\uff1a</p> <p><pre><code>import torch\nfrom transformers import RagTokenizer, RagRetriever, RagTokenForGeneration\n\n# \u521d\u59cb\u5316 tokenizer \u548c\u751f\u6210\u5668\ntokenizer = RagTokenizer.from_pretrained(\"facebook/rag-token-nq\")\nmodel = RagTokenForGeneration.from_pretrained(\"facebook/rag-token-nq\", retriever=RagRetriever.from_pretrained(\"facebook/rag-token-nq\", use_dummy_dataset=True))\n\ninput_text = \"What is the capital of France?\"\ninput_ids = tokenizer(input_text, return_tensors=\"pt\").input_ids\n\noutputs = model.generate(input_ids)\nprint(tokenizer.decode(outputs[0], skip_special_tokens=True))\n</code></pre> \u5176\u4e2d\uff0ctokenizer \u7528\u4e8e\u5c06\u6587\u672c\u8f6c\u6362\u4e3a\u6a21\u578b\u53ef\u4ee5\u7406\u89e3\u7684\u683c\u5f0f\uff0c\u5373 tokens\uff1bRagTokenForGeneration \u662f RAG \u6a21\u578b\u7684\u751f\u6210\u90e8\u5206\uff0cRagRetriever \u662f RAG \u6a21\u578b\u7684\u68c0\u7d22\u90e8\u5206\u3002</p> <p>\u4e0a\u8ff0\u8bba\u6587 Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks  \u4e5f\u7ed9\u51fa\u4e86\u5bf9\u5e94\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u5f00\u6e90\u4e8e\uff1aGitHub \u94fe\u63a5\u3002</p> <p>\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4e5f\u6709\u5f88\u591a\u5f00\u6e90\u7684 RAG \u6846\u67b6\u53ef\u4f9b\u5feb\u901f\u90e8\u7f72\uff0c\u4f8b\u5982 RAGFlow\u3001MaxKB \u7b49\u3002\u5177\u4f53\u5730\uff0c\u8fd9\u4e9b\u6846\u67b6\u63d0\u4f9b\u4e86\u4ece\u89e3\u6790\u5668\u5230\u751f\u6210\u5668\u7684\u4e00\u6574\u5957\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u5bf9\u4e0d\u540c\u6587\u4ef6\u683c\u5f0f\u7684\u5916\u90e8\u6750\u6599\u8fdb\u884c\u672c\u5730\u89e3\u6790\u548c tokenize\uff0c\u4ea6\u53ef\u9009\u62e9\u4e0d\u540c\u76f8\u4f3c\u5ea6\u7684\u8ba1\u7b97\u65b9\u6cd5\u548c\u540e\u7aef\u5927\u6a21\u578b API\u3002</p>"},{"location":"AI/LLMs/rag/#challenges","title":"Challenges","text":"<p>RAG \u6d41\u7a0b\u4e2d\uff0c\u4e0d\u540c\u9636\u6bb5\u5206\u522b\u6709\u4e0d\u540c\u7684\u6f5c\u5728\u6311\u6218\u3002</p> <p>\u5bf9\u5916\u90e8\u6750\u6599\u6765\u8bf4\uff0c\u4e00\u4e2a\u662f\u6750\u6599\u672c\u8eab\u662f\u5426\u53ef\u9760\uff0c\u96c6\u4e2d\u4e8e\u8d28\u91cf\u95ee\u9898\u548c\u65f6\u6548\u95ee\u9898\uff1b\u4e00\u4e2a\u662f tokenize \u7684\u8fc7\u7a0b\u80fd\u5426\u5c06\u5916\u90e8\u6750\u6599\u4fe1\u606f\u9ad8\u8d28\u91cf\u5730\u8f6c\u6362\u4e3a\u5927\u6a21\u578b\u53ef\u5229\u7528\u7684 token\u3002</p> <p>\u524d\u8005\u5b9e\u9645\u4e0a\u66f4\u4f9d\u8d56\u4e8e\u6750\u6599\u7684\u63d0\u4f9b\u8005\uff0c\u800c\u540e\u8005\u7684\u5f71\u54cd\u56e0\u7d20\u4f17\u591a\uff0c\u751a\u81f3\u6d89\u53ca\u5230\u591a\u6a21\u6001\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u5916\u90e8\u6750\u6599\u5b58\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u683c\u5f0f\u6216\u6392\u7248\u683c\u5f0f\uff0c\u4f7f\u7528\u7684 OCR \u7b49\u65b9\u5f0f\u80fd\u5426\u5c06\u5176\u9ad8\u8d28\u91cf\u5730\u8f6c\u6362\u4e3a\u7eaf\u6587\u672c\u4fe1\u606f\uff1f\u5b9e\u9645\u4e0a\uff0cImplementation \u5c0f\u8282\u4e2d\u63d0\u5230\u7684\u5f00\u6e90 RAG \u6846\u67b6 RAGFlow \u5df2\u7ecf\u5728\u4e0d\u540c\u6587\u4ef6\u53ca\u6392\u7248\u683c\u5f0f\u4e0a\u505a\u4e86\u4e00\u4e9b\u5de5\u4f5c\uff0cRAGFlow \u7684\u6587\u4ef6\u89e3\u6790\u5668 DeepDoc \u89c1 GitHub \u94fe\u63a5\u3002</p> <p>\u5bf9\u68c0\u7d22\u5668\u6765\u8bf4\uff0c\u6838\u5fc3\u5219\u662f\u68c0\u7d22\u7684\u901f\u5ea6\u548c\u51c6\u786e\u7387\u3002</p> <p>\u5728\u5e02\u9762\u4e0a\u5e38\u89c1\u7684 RAG \u6846\u67b6\u4e2d\uff0c\u4e00\u822c\u662f\u4f7f\u7528\u5411\u91cf\u5316\u7684\u65b9\u5f0f\u6765\u8ba1\u7b97\u5411\u91cf\u4e4b\u95f4\u4f59\u5f26\u8ddd\u79bb\uff0c\u6216\u8005\u901a\u8fc7\u5173\u952e\u8bcd\u5339\u914d\u7684\u65b9\u5f0f\uff0c\u518d\u6216\u8005\u4e8c\u8005\u7ed3\u5408\u5747\u8fd4\u56de\u7ed3\u679c\uff0c\u9009\u5176\u76f8\u5173\u6027\u8f83\u9ad8\u7684\u4e00\u4e2a\u3002\u663e\u7136\uff0c\u901f\u5ea6\u548c\u51c6\u786e\u96be\u4ee5\u5f97\u517c\uff0c\u66f4\u591a\u662f\u4e00\u4e2a\u7ed3\u5408\u5e94\u7528\u573a\u666f\u518d\u505a trade off \u7684\u95ee\u9898\u3002\u5b66\u754c\u5bf9\u8fd9\u4e2a\u95ee\u9898\u7684\u8fdb\u5c55\u6211\u6ca1\u6709\u505a\u6df1\u5165\u8c03\u7814\uff0c\u6211\u731c\u6d4b\u662f\u5728\u68c0\u7d22\u7b97\u6cd5\u6216\u8005\u7d22\u5f15\u7ed3\u6784\u4e0a\u505a\u4e00\u4e9b\u4f18\u5316\u3002</p> <p>\u5bf9\u751f\u6210\u5668\u6765\u8bf4\uff0c\u5b9e\u9645\u4e0a\u66f4\u4f9d\u8d56\u4e8e\u5927\u6a21\u578b\u7684\u8868\u73b0\uff0c\u4f9d\u8d56\u4e8e Prompt Engineering \u6216\u8005 Fine Tuning \u7b49\u65b9\u6cd5\u5bf9\u6a21\u578b\u672c\u8eab\u505a\u5b9a\u5411\u9002\u914d\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d\u4e5f\u9047\u5230\u4e86\u4e00\u4e9b\u770b\u4f3c\u548c RAG \u5f3a\u76f8\u5173\u4f46\u5176\u5b9e\u5df2\u7ecf\u8d85\u51fa\u4e86 RAG \u9002\u7528\u8303\u56f4\u7684\u95ee\u9898\uff0c\u89e3\u51b3\u601d\u8def\u662f\u7528\u591a\u4e2a Agents \u505a\u914d\u5408\u518d\u7ed3\u5408\u4e00\u4e9b\u4f20\u7edf\u7b97\u6cd5\u3002\u5177\u4f53\u7ec6\u8282\u6309\u4e0b\u4e0d\u8868\u3002</p>"},{"location":"AI/LLMs/rag/#more","title":"More","text":"<p>\u5173\u4e8e RAG \u7684\u7efc\u8ff0\u6587\u7ae0\uff0c\u4f9d\u7167\u6700\u8fd1\u66f4\u65b0\u65f6\u95f4\u6392\u5e8f\u3002</p> <ol> <li> <p>[Submitted on 29 Feb 2024 (v1), last revised 2 May 2024 (this version, v4)] Retrieval-Augmented Generation for AI-Generated Content: A Survey</p> </li> <li> <p>[Submitted on 18 Dec 2023 (v1), last revised 27 Mar 2024 (this version, v5)]  Retrieval-Augmented Generation for Large Language Models: A Survey</p> </li> </ol>"},{"location":"AI/LLMs/Applications/bi/","title":"Business Intelligence","text":""},{"location":"system/OS/boot/","title":"Boot","text":""},{"location":"system/prog/compile/","title":"Compile","text":"<p>\u8ba9\u673a\u5668\u542c\u5f97\u61c2\u4eba\u8bdd</p>"},{"location":"system/prog/compile/#hello","title":"\u5e8f\u8a00\uff1a\u4f9d\u65e7\u662f Hello","text":"<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n    printf(\"hello, world!\\n\");\n    return 0;\n}\n</code></pre> <p>\u300aThe C Program Language\u300b\u51fa\u7248\u4ee5\u6765\u5c31\u6210\u4e3a\u65e0\u6570\u7a0b\u5e8f\u5458\u5165\u95e8\u5723\u7ecf\u7684 <code>hello</code> \u7a0b\u5e8f\u5bf9\u5427\uff1fOK\uff0c\u6211\u4eec\u518d\u6765\u7b80\u5355\u5730\u7f16\u8bd1\u3001\u8fd0\u884c\u4e00\u4e0b\u8fd9\u4e2a <code>hello</code>\uff1a</p> <pre><code>$ gcc hello.c -o hello\n$ ./hello\nhello, world!\n</code></pre> <p>\u8c03 gcc\uff0c\u7ed9\u51fa\u6587\u4ef6\u540d\uff0c\u52a0\u4e00\u4e2a <code>-o</code>  \u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6587\u4ef6\u540d\uff0c\u5c31\u53ef\u4ee5\u7f16\u8bd1\u51fa\u6765\u6211\u4eec\u60f3\u8981\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u518d\u6267\u884c\u4e00\u4e0b\u5b83\uff0c\u7a0b\u5e8f\u91cc\u7684\u5b57\u7b26\u4e32\u5c31\u6253\u5370\u51fa\u6765\u3002</p> <p>\u6bcf\u4e00\u4e2a\u5408\u683c\u7684\u8ba1\u7b97\u673a\u76f8\u5173\u4e13\u4e1a\u7684\u5927\u4e00\u5b66\u751f\u4e5f\u90fd\u77e5\u9053\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5176\u5b9e\u5c31\u662f\uff1a</p> <pre><code>graph LR\n  A[C \u4ee3\u7801] --&gt; |\u7f16\u8bd1| B[\u4e8c\u8fdb\u5236\u4ee3\u7801];</code></pre> <p>\u5177\u4f53\u4e00\u70b9\uff0c\u5176\u4e2d\uff1a</p> <ol> <li>\u300cC\u4ee3\u7801\u300d\u662f\u6269\u5c55\u540d\u4e3a <code>.c</code> \u7684\u6587\u672c\u6587\u4ef6\uff0c\u5185\u5bb9\u662f\u5b57\u7b26\u4e32</li> <li>\u300c\u7f16\u8bd1\u300d\u662f\u7528\u7f16\u8bd1\u5668\u6765\u8fdb\u884c\u7684\uff0c\u7f16\u8bd1\u5668\u4e5f\u6709 gcc\u3001clang \u7b49\u5404\u79cd\u4e0d\u540c\u7684\u5b9e\u73b0</li> <li>\u300c\u4e8c\u8fdb\u5236\u4ee3\u7801\u300d\u662f\u6269\u5c55\u540d\u4e3a<code>.exe</code> \u7b49\uff08\u89c6\u8fd0\u884c\u73af\u5883\u800c\u5b9a\uff09\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5185\u5bb9\u662f 0101 \u7684\u4f4d\u4e32\u3002</li> </ol> <p>\u548c\u5145\u6ee1\u7740\u5e0c\u671b\u7684\u5927\u4e00\u65b0\u751f\u76f8\u6bd4\uff0c\u6211\u8fd9\u6837\u7684\u8001\u53e4\u8463\u6ca1\u51c6\u8981\u6bd4\u4ed6\u4eec\u77e5\u9053\u7684\u7a0d\u5fae\u591a\u4e00\u70b9\uff0c\u8fd9\u7bc7\u6587\u7ae0\u5c31\u662f\u8981\u4ecb\u7ecd\u300c\u7f16\u8bd1\u300d\u7684\u8fc7\u7a0b\uff0c\u540c\u65f6\u7a0d\u5fae\u4f53\u73b0\u4e00\u70b9\u8001\u53e4\u8463\u5bf9\u5199\u4f5c\u6280\u672f\u5c0f\u54c1\u6587\u7684\u601d\u8003\u3002\u540e\u6d6a\u4eec\u592a\u6c79\u6d8c\u4e86\uff0c\u524d\u6d6a\u5f88\u5bb3\u6015\u3002</p> <p>\u8ffd\u95ee\u4e09\u8fde</p> <ul> <li>\u600e\u4e48\u907f\u514d\u5185\u5bb9\u96f6\u788e\u903b\u8f91\u4e0d\u6e05\u6670\uff1f</li> <li>\u600e\u4e48\u907f\u514d\u7f57\u5217\u6982\u5ff5\u6389\u4e66\u888b\u88c5\u5b54\u8001\u592b\u5b50\uff1f</li> <li>\u600e\u4e48\u907f\u514d\u542c\u541b\u4e00\u5e2d\u8bdd\u5982\u542c\u4e00\u5e2d\u8bdd\uff0c\u770b\u5b8c\u5927\u51e0\u5343\u5b57\u7ed3\u679c\u53ea\u8bb0\u4f4f\u4e86\u51e0\u4e2a\u5929\u4e0a\u6389\u4e0b\u6765\u7684\u540d\u8bcd\uff1f</li> </ul>"},{"location":"system/prog/compile/#log","title":"\u7ec6\u8282\uff1a\u4e0a log","text":"<p>\u79c9\u6301\u300c\u4ece\u5b9e\u8df5\u4e2d\u6765\u5230\u5b9e\u8df5\u4e2d\u53bb\u300d\u7684\u601d\u60f3\uff1a\u8981\u8bb2\u300c\u7f16\u8bd1\u300d\uff0c\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u529e\u6cd5\u5c31\u662f\u76f4\u63a5\u4e0a\u624b\u7f16\u8bd1\u4e00\u4e2a\u7a0b\u5e8f\u6765\u770b\u770b\u8fc7\u7a0b\uff01\u521a\u521a\u6211\u4eec\u5df2\u7ecf\u7f16\u8bd1\u8fc7\u4e00\u4e2a\u4e86\uff0c\u6240\u4ee5\u73b0\u5728\u53ef\u4ee5\u5077\u4e2a\u61d2\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u73b0\u5728\uff0c\u6211\u4eec\u9700\u8981\u5bf9 <code>gcc hello.c -o hello</code> \u8fd9\u4e2a\u547d\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\u505a\u4e00\u4e0b\u8003\u5bdf\uff01\u6211\u4eec\u9700\u8981\u4e86\u89e3\u5173\u4e8e\u5b83\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>OK\uff0c\u4fe1\u6e90\u53c8\u53ef\u4ee5\u5206\u4e3a\u5916\u90e8\u7684\u548c\u5185\u90e8\u7684\uff0c\u800c\u6211\u4eec\u73b0\u5728\u663e\u7136\u4e0d\u60f3\u53bb Google \u5176\u4ed6\u6587\u7ae0\u770b\u4ecb\u7ecd\uff0c\u4e5f\u4e0d\u60f3\u627e\u5927\u6a21\u578b\u8ba9\u5b83\u4ece\u6982\u5ff5\u4e0a\u8bf4\u4e00\u5806\u4e0d\u660e\u6240\u4ee5\u7684\u540d\u8bcd\u2014\u2014\u6211\u4eec\u73b0\u5728\u53ea\u662f\u60f3\u641e\u6e05\u695a\u8fd9\u4e2a\u547d\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u6211\u4eec\u9700\u8981\u5b83\u672c\u8eab\u7ed9\u6211\u4eec\u66f4\u591a\u4fe1\u606f\uff01</p> <p>\u8fd9\u5c31\u5f15\u5165\u4e86 <code>log</code> \u3002</p> <p>\u6211\u4eec\u9700\u8981\u4e86\u89e3\u67d0\u4e2a\u7a0b\u5e8f\u672c\u8eab\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u4e5f\u5c31\u662f\u5177\u4f53\u53bb\u770b\u5b83\u8fd0\u884c\u65f6\u7684\u884c\u4e3a\uff0c\u5982\u6b64\uff0c\u5c31\u53ef\u4ee5\u8003\u8651\u67e5\u770b\u5b83\u7684\u8fd0\u884c\u65e5\u5fd7\uff01\u65e5\u5fd7\u662f\u5bf9\u7a0b\u5e8f\u6267\u884c\u72b6\u6001\u7684\u8bb0\u5f55\uff0c\u901a\u8fc7\u5b83\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5230\u7a0b\u5e8f\u5728\u91cd\u8981\u8282\u70b9\u4e0a\u7684\u72b6\u6001\u4fe1\u606f\u3002</p>"},{"location":"system/prog/compile/#log_1","title":"\u62ff\u5230 log","text":"<p>\u90a3\u4e48\u600e\u4e48\u770b gcc \u7684\u65e5\u5fd7\uff1f\u806a\u660e\u7684\u4f60\u80af\u5b9a\u654f\u9510\u5730\u610f\u8bc6\u5230\u8fd9\u662f\u4e00\u4e2a\u9700\u8981\u4ece\u5916\u90e8\u4fe1\u6e90\u83b7\u53d6\u4fe1\u606f\u7684\u95ee\u9898\u2014\u2014Google/\u95ee LLM \u4e00\u4e0b\u5c31\u53ef\u4ee5\u77e5\u9053\uff0c\u5176\u5b9e\u53ea\u9700\u8981\u52a0\u4e2a <code>-v</code>  \u7684\u53c2\u6570\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>$ gcc -v hello.c -o hello\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper\nOFFLOAD_TARGET_NAMES=nvptx-none:amdgcn-amdhsa\nOFFLOAD_TARGET_DEFAULT=1\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 11.4.0-1ubuntu1~22.04' --with-bugurl=file:///usr/share/doc/gcc-11/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++,m2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-11 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --enable-default-pie --with-system-zlib --enable-libphobos-checking=release --with-target-system-zlib=auto --enable-objc-gc=auto --enable-multiarch --disable-werror --enable-cet --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-nvptx/usr,amdgcn-amdhsa=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-gcn/usr --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu --with-build-config=bootstrap-lto-lean --enable-link-serialization=2\nThread model: posix\nSupported LTO compression algorithms: zlib zstd\ngcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04)\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64'\n /usr/lib/gcc/x86_64-linux-gnu/11/cc1 -quiet -v -imultiarch x86_64-linux-gnu hello.c -quiet -dumpbase hello.c -dumpbase-ext .c -mtune=generic -march=x86-64 -version -fasynchronous-unwind-tables -fstack-protector-strong -Wformat -Wformat-security -fstack-clash-protection -fcf-protection -o /tmp/ccen7Fxl.s\nGNU C17 (Ubuntu 11.4.0-1ubuntu1~22.04) version 11.4.0 (x86_64-linux-gnu)\n    compiled by GNU C version 11.4.0, GMP version 6.2.1, MPFR version 4.1.0, MPC version 1.2.1, isl version isl-0.24-GMP\n\nGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nignoring nonexistent directory \"/usr/local/include/x86_64-linux-gnu\"\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-linux-gnu/11/include-fixed\"\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-linux-gnu/11/../../../../x86_64-linux-gnu/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/lib/gcc/x86_64-linux-gnu/11/include\n /usr/local/include\n /usr/include/x86_64-linux-gnu\n /usr/include\nEnd of search list.\nGNU C17 (Ubuntu 11.4.0-1ubuntu1~22.04) version 11.4.0 (x86_64-linux-gnu)\n    compiled by GNU C version 11.4.0, GMP version 6.2.1, MPFR version 4.1.0, MPC version 1.2.1, isl version isl-0.24-GMP\n\nGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nCompiler executable checksum: 50eaa2331df977b8016186198deb2d18\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64'\n as -v --64 -o /tmp/cc75m0ed.o /tmp/ccen7Fxl.s\nGNU assembler version 2.38 (x86_64-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.38\nCOMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/\nLIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../:/lib/:/usr/lib/\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n /usr/lib/gcc/x86_64-linux-gnu/11/collect2 -plugin /usr/lib/gcc/x86_64-linux-gnu/11/liblto_plugin.so -plugin-opt=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper -plugin-opt=-fresolution=/tmp/cceWsRsk.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu --as-needed -dynamic-linker /lib64/ld-linux-x86-64.so.2 -pie -z now -z relro -o hello /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/Scrt1.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/11/crtbeginS.o -L/usr/lib/gcc/x86_64-linux-gnu/11 -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/11/../../.. /tmp/cc75m0ed.o -lgcc --push-state --as-needed -lgcc_s --pop-state -lc -lgcc --push-state --as-needed -lgcc_s --pop-state /usr/lib/gcc/x86_64-linux-gnu/11/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crtn.o\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n</code></pre> <p>\u5927\u91cf\u4fe1\u606f\u4ece\u7ec8\u7aef\u4e2d\u5954\u6d8c\u800c\u51fa\uff0c\u5c45\u7136\u539f\u6765\u4ec0\u4e48\u4e5f\u6ca1\u8f93\u51fa\u7684\u80cc\u540e\u8fd8\u6f5c\u85cf\u7740\u8fd9\u4e48\u591a\u7684\u4e1c\u897f\uff01\u8fd9\u4e48\u591a\u4e1c\u897f\u6211\u4eec\u5168\u770b\u61c2\u4e5f\u4e0d\u73b0\u5b9e\uff0c\u4f46\u8fd9\u4e0d\u5f71\u54cd\u6211\u4eec\u4ece\u4e8b\u7269\u672c\u8d28\u7684\u89d2\u5ea6\u6765\u5256\u6790\u5b83\u3002\u6211\u4eec\u73b0\u5728\u9700\u8981\u505a\u7684\u662f\u4ece <code>log</code>  \u91cc\u62bd\u4e1d\u5265\u8327\u627e\u5230\u80fd\u63cf\u8ff0\u6e05\u695a\u7f16\u8bd1\u8fc7\u7a0b\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u770b\u90a3\u79cd\u53ef\u4ee5\u533a\u5206\u51fa\u6765\u7a0b\u5e8f\u884c\u4e3a\u7684\u4e0d\u540c\u9636\u6bb5\u7684\u5185\u5bb9\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>\u4ee5\u7ec8\u7aef\u91cc\u7a7a\u51fa\u6765\u7684\u56de\u8f66\u6362\u884c\u4e3a\u5206\u754c\u70b9\uff1a</p>"},{"location":"system/prog/compile/#log_2","title":"\u5206\u6790 log","text":"<p>\u7b2c\u4e00\u6bb5\uff0c\u53ef\u4ee5\u53d1\u73b0\u6709\u4e00\u4e9b gcc \u7684\u7248\u672c\uff08<code>gcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04)</code>\uff09\u548c\u8fd0\u884c\u73af\u5883\u4fe1\u606f\uff08<code>Target: x86_64-linux-gnu</code>\uff09\uff0c\u5927\u6982\u7387\u662f\u4e00\u4e9b\u521d\u59cb\u5316\u8fd8\u6709\u72b6\u6001\u68c0\u67e5\u7684\u4e1c\u897f\uff0c\u8fd9\u4e9b\u4e0d\u662f\u6211\u4eec\u9700\u8981\u4e3b\u8981\u5173\u5fc3\u7684\uff0cPASS\u3002</p> <p>\u4f46\u662f\u5176\u4e2d\u6709\u4e24\u884c\u662f\u6211\u4eec\u6bd4\u8f83\u611f\u5174\u8da3\u7684\u4e1c\u897f\uff1a</p> <pre><code>COLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64'\n /usr/lib/gcc/x86_64-linux-gnu/11/cc1 -quiet -v -imultiarch x86_64-linux-gnu hello.c -quiet -dumpbase hello.c -dumpbase-ext .c -mtune=generic -march=x86-64 -version -fasynchronous-unwind-tables -fstack-protector-strong -Wformat -Wformat-security -fstack-clash-protection -fcf-protection -o /tmp/ccen7Fxl.s\n</code></pre> <p>1\u3001COLLECT_GCC_OPTIONS \u662f\u6536\u96c6\u5230\u7684\u4f20\u9012\u7ed9 gcc \u7684\u9009\u9879\u3002<code>-v</code> \u8868\u793a\u663e\u793a\u8be6\u7ec6\u7684\u7f16\u8bd1\u8fc7\u7a0b\uff0c<code>-o hello</code> \u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u540d\u4e3a <code>hello</code>\uff0c<code>-mtune=generic</code> \u548c <code>-march=x86-64</code> \u6211\u4eec\u4e0d\u4e86\u89e3\uff0c\u4f46\u731c\u6d4b\u4e5f\u662f\u7cfb\u7edf\u9ed8\u8ba4\u52a0\u4e0a\u7684\u548c x86-64 \u67b6\u6784\u6709\u5173\u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0d\u91cd\u70b9 care\u3002</p> <p>2\u3001\u5b83\u4e0d\u662f\u53c2\u6570\u5217\u8868\uff0c\u4e5f\u4e0d\u662f\u8def\u5f84\uff0c\u4e5f\u4e0d\u662f\u67d0\u4e2a\u643a\u5e26\u4fe1\u606f\u7684\u7eaf\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u5728 Linux \u91cc\u5927\u6982\u7387\u5c31\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u6216\u8005\u8bf4\u5c31\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u540e\u9762\u7684\u5c31\u662f\u7ed9\u5b83\u7684\u53c2\u6570\u3002\u8fd9\u4e2a\u7a0b\u5e8f\u53eb <code>cc1</code>\uff0c\u53ef\u4ee5\u53d1\u73b0\u643a\u5e26\u4e86\u4e0a\u9762 <code>COLLECT_GCC_OPTIONS</code> \u4e2d\u7684\u53c2\u6570\uff0c\u800c\u4e14\u8fd8\u5bf9 <code>hello.c</code> \u548c <code>ccen7Fxl.s</code> \u8fd9\u4e24\u4e2a\u6587\u4ef6\u505a\u4e86\u64cd\u4f5c\u3002\u5927\u80c6\u731c\u6d4b\uff0c<code>ccen7Fxl.s</code> \u662f\u4e0d\u662f <code>hello.c</code> \u7ecf\u8fc7 <code>cc1</code> \u5904\u7406\u4ee5\u540e\u7684\u8f93\u51fa\uff1f</p> <p>\u7b2c\u4e8c\u6bb5\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e00\u6bb5\u91cc\u4e5f\u6709\u4e00\u4e9b\u6211\u4eec\u611f\u5174\u8da3\u7684\u4e1c\u897f\uff1agcc \u6253\u5370\u51fa\u4e09\u884c <code>ignoring nonexistent directory</code> \uff0c\u5b57\u9762\u610f\u601d\u5c31\u662f\u8bf4\u5ffd\u7565\u4e86\u8fd9\u4e09\u4e2a\u4e0d\u5b58\u5728\u7684\u8def\u5f84\uff1b\u8fd8\u6709\u4e24\u884c <code>#include \"/&lt;...\"/&gt; search starts here:</code> \uff0c\u5176\u4e2d <code>\"...\"</code> \u7684\u6ca1\u4e1c\u897f\u3001<code>&lt;...&gt;</code> \u7684\u6709\u56db\u4e2a\u8def\u5f84\uff08\u8054\u7cfb\u8d77\u6765 C \u4e2d\u5f15\u53f7\u662f\u81ea\u5b9a\u4e49\u5e93\uff0c\u5c16\u62ec\u53f7\u662f\u7cfb\u7edf\u5e93\uff09\uff1b\u6700\u540e\u8fd8\u8bf4 <code>End of search list.</code> \u3002\u800c\u4e14\uff0c\u4ed4\u7ec6\u770b\u4f1a\u53d1\u73b0\u8fd9\u51e0\u4e2a\u8def\u5f84\u91cc\u90fd\u6709\u300cinclude\u300d\u3002</p> <p>\u8054\u7cfb\u4e00\u4e0b C \u8bed\u8a00\u7684\u8bed\u6cd5\u7ec6\u8282\u2014\u2014\u90a3\u4e48\u8fd9\u4e00\u6bb5\u5927\u6982\u7387\u5c31\u662f\u5728\u627e <code>#include</code> \u5173\u952e\u5b57\u540e\u9762\u7684\u90a3\u4e2a <code>stdio.h</code> \u4e86\uff01</p> <p>\u770b\u4e00\u4e0b\u5bf9\u5e94\u8def\u5f84\u91cc\u7684\u5185\u5bb9\u6709\u6ca1\u6709\u6211\u4eec\u9700\u8981\u7684\u4e1c\u897f\uff1a</p> <pre><code>$ ls -al /usr/lib/gcc/x86_64-linux-gnu/11/include | grep stdio.h\n$ ls -al /usr/local/include | grep stdio.h\n$ ls -al /usr/include/x86_64-linux-gnu | grep stdio.h\n$ ls -al /usr/include | grep stdio.h\n-rw-r--r--  1 root root  31176 Apr 16 21:40 stdio.h\n</code></pre> <p>\u679c\u771f\u5728\u7b2c\u56db\u4e2a\u8def\u5f84\u91cc\uff01\u597d\u4e86\uff0c\u8fd9\u4e0b double check \u4e86\uff0clog \u91cc\u7684\u7b2c\u4e8c\u6bb5\u5c31\u662f\u5728\u627e\u5bf9\u5e94\u7684\u5934\u6587\u4ef6\uff01\u5230\u6b64\uff0c\u65e5\u5fd7\u7684 \\(2/3\\) \u6211\u4eec\u90fd\u770b\u8fc7\u4e86\u3002</p> <pre><code>GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nCompiler executable checksum: 50eaa2331df977b8016186198deb2d18\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64'\n as -v --64 -o /tmp/cc75m0ed.o /tmp/ccen7Fxl.s\nGNU assembler version 2.38 (x86_64-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.38\nCOMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/\nLIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../:/lib/:/usr/lib/\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n /usr/lib/gcc/x86_64-linux-gnu/11/collect2 -plugin /usr/lib/gcc/x86_64-linux-gnu/11/liblto_plugin.so -plugin-opt=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper -plugin-opt=-fresolution=/tmp/cceWsRsk.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu --as-needed -dynamic-linker /lib64/ld-linux-x86-64.so.2 -pie -z now -z relro -o hello /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/Scrt1.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/11/crtbeginS.o -L/usr/lib/gcc/x86_64-linux-gnu/11 -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/11/../../.. /tmp/cc75m0ed.o -lgcc --push-state --as-needed -lgcc_s --pop-state -lc -lgcc --push-state --as-needed -lgcc_s --pop-state /usr/lib/gcc/x86_64-linux-gnu/11/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crtn.o\nCOLLECT_GCC_OPTIONS='-v' '-o' 'hello' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n</code></pre> <p>\u7b2c\u4e09\u6bb5\uff1a</p> <p>4\u3001as\uff0c\u4e00\u4e2a\u53eb <code>as</code> \u7684\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u53d1\u73b0\u662f\u5bf9\u7cfb\u7edf\u4e34\u65f6\u8def\u5f84\u91cc\u7684\u540e\u7f00\u4e3a <code>.o</code> \u548c <code>.s</code> \u7684\u6587\u4ef6\u505a\u64cd\u4f5c\u3002\u800c\u4e14\uff0c<code>ccen7Fxl.s</code> \u8fd9\u4e2a\u6587\u4ef6\u53c8\u51fa\u73b0\u4e86\uff01</p> <p>5\u3001\u7248\u672c\u4fe1\u606f\uff0c\u672c\u6765\u4e0d\u9700\u8981\u5173\u6ce8\uff0c\u4f46\u662f\u8fd9\u91cc\u4e0d\u662f compiler \u7f16\u8bd1\u5668\uff0c\u800c\u662f\u4e00\u4e2a\u53eb\u505a assembler \u7684\u7a0b\u5e8f\uff0c\u8fd9\u5c31\u9700\u8981\u989d\u5916\u5173\u6ce8\u4e86\u3002\u76f2\u731c\u5c31\u662f\u4e0a\u9762\u7684 <code>as</code>\u3002</p> <p>6\u3001COMPILER_PATH \u548c LIBRARY_PATH\uff0c\u7f16\u8bd1\u5668\u548c\u5e93\u8def\u5f84\uff0c\u4e3a\u4ec0\u4e48\u7f16\u8bd1\u5668\u7684\u8def\u5f84\u8981\u5728\u8fd9\u91cc\u7ed9\u51fa\u6765\uff1f\u53c8\u4e3a\u4ec0\u4e48\u548c\u5e93\u8def\u5f84\u4e00\u8d77\u7ed9\u51fa\u6765\uff1f</p> <p>8\u3001COLLECT_GCC_OPTIONS\uff0c\u53c8\u663e\u793a\u4e86\u4e00\u904d\u6536\u96c6\u5230\u7684\u7ed9 gcc \u7684\u9009\u9879\uff0c\u4f46\u662f\u6bd4\u7b2c 3 \u884c\u591a\u4e86\u4e00\u4e2a\u9009\u9879\uff1a <code>-dumpdir hello.</code>\uff0c\u548c <code>hello</code> \u7a0b\u5e8f\u7684 <code>dumpdir</code> \u6709\u5173\u3002</p> <p>9\u3001collect2\uff0c\u548c <code>as</code> \u7c7b\u4f3c\uff0c\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u4f46\u662f\u540e\u9762\u7684\u53c2\u6570\u5374\u957f\u5f97\u591a\u3002\u4ed4\u7ec6\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\uff0c\u5176\u4e2d\u4e3b\u8981\u6d89\u53ca\u5230\u7684\u6587\u4ef6\u7c7b\u578b\u6709\u4e24\u79cd\uff1a<code>.so</code> \u548c <code>.o</code>\uff0c\u90a3\u4e48\u8fd9\u91cc\u7684 <code>.o</code> \u6587\u4ef6\u4f1a\u4e0d\u4f1a\u548c\u7b2c 4 \u884c <code>as</code> \u7684 <code>.o</code> \u6587\u4ef6\u6709\u5173\u7cfb\uff1f\u518d\u4ed4\u7ec6\u770b\uff0c\u4f1a\u53d1\u73b0 <code>cc75m0ed.o</code> \u8fd9\u4e2a\u6587\u4ef6\u771f\u8fd8\u51fa\u73b0\u5728\u4e86\u8fd9\u4e00\u884c\u7684\u53c2\u6570\u91cc\uff01</p> <p>10\u3001COLLECT_GCC_OPTIONS\uff0c\u6700\u540e\u53c8\u51fa\u73b0\u4e86\u4e00\u904d\u548c\u7b2c 8 \u884c\u5b8c\u5168\u4e00\u81f4\u7684\u53c2\u6570\u5217\u8868\u3002</p> <p>\u867d\u7136\u4f9d\u65e7\u5b58\u5728\u5f88\u591a\u7591\u95ee\uff0c\u4f46\u662f\u6211\u4eec\u8d77\u7801\u4ece\u7b2c\u4e09\u6bb5\u91cc\u53ef\u4ee5\u62bd\u8c61\u51fa\u6765\uff1a\u7f16\u8bd1\u7684\u8fc7\u7a0b\uff0c\u9700\u8981\u5148\u5904\u7406\u5934\u6587\u4ef6\uff0c\u51c6\u786e\u6765\u8bf4\u662f\u627e\u5230\u5bf9\u5e94\u7684\u5934\u6587\u4ef6\uff0c\u7136\u540e\u8c03\u7528\u4e00\u4e2a\u53eb\u505a <code>as</code> \u7684\u7a0b\u5e8f\uff0c\u518d\u8c03\u7528\u4e00\u4e2a\u53eb <code>collect2</code> \u7684\u7a0b\u5e8f\uff0c\u800c\u4e14 <code>as</code> \u8f93\u51fa\u7684 <code>.o</code> \u6587\u4ef6\u8fd8\u662f <code>collect2</code> \u7684\u4e00\u4e2a\u91cd\u8981\u8f93\u5165\u3002</p> <p>\u90a3\u4e48\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u53bb\u770b\u4e00\u4e0b\u90a3\u4e24\u4e2a <code>/tmp/cc75m0ed.o</code> \u548c <code>/tmp/ccen7Fxl.s</code> \u6587\u4ef6\u7684\u5185\u5bb9\uff1a</p> <pre><code>$ cat /tmp/cc75m0ed.o\ncat: /tmp/cc75m0ed.o: No such file or directory\n</code></pre> <p>\u4f46\u662f\u5f88\u9057\u61be\uff0cgcc \u8c8c\u4f3c\u4e0d\u60f3\u8ba9\u6211\u4eec\u770b\u5230\u5b83\u4eec\uff0c\u628a\u5b83\u4eec\u653e\u5728\u4e86\u7cfb\u7edf <code>/tmp</code> \u76ee\u5f55\u4e0b\uff0c\u968f\u7740\u4e0a\u9762 gcc \u8fdb\u7a0b\u751f\u547d\u5468\u671f\u7684\u7ed3\u675f\uff0c\u8fd9\u4e2a\u6587\u4ef6\u4e5f\u88ab\u5220\u9664\u4e86\u3002</p> <p>\u96be\u9053\u6211\u4eec\u771f\u5c31\u770b\u4e0d\u5230\u8fd9\u4e2a\u6587\u4ef6\u4e86\uff1f\u4e0d\uff01\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed Google/\u95ee LLM\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u53d1\u73b0 <code>-save-temps</code> \u8fd9\u4e2a\u53c2\u6570\uff1a</p> <pre><code>$ gcc -save-temps hello.c -o hello\n$ ll\ntotal 48K\n-rwxrwxr-x 1 ghzhang ghzhang  16K May 29 04:00 hello*\n-rw-rw-r-- 1 ghzhang ghzhang   73 May 29 02:50 hello.c\n-rw-rw-r-- 1 ghzhang ghzhang  18K May 29 04:00 hello.i\n-rw-rw-r-- 1 ghzhang ghzhang 1.5K May 29 04:00 hello.o\n-rw-rw-r-- 1 ghzhang ghzhang  666 May 29 04:00 hello.s\n</code></pre> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece <code>hello.c</code> \u5f00\u59cb\uff0c\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4f1a\u4ea7\u751f\u8fd9\u4e09\u4e2a\u4e2d\u95f4\u6587\u4ef6\uff0c\u6700\u540e\u4ea7\u751f <code>hello</code> \u8fd9\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u3002\u90a3\u4e48\u6211\u4eec\u5206\u522b\u6253\u5370\u5b83\u4eec\u770b\u770b\uff1a</p> <pre><code>$ cat hello.i\n# 0 \"hello.c\"\n# 0 \"&lt;built-in&gt;\"\n# 0 \"&lt;command-line&gt;\"\n# 1 \"/usr/include/stdc-predef.h\" 1 3 4\n# 0 \"&lt;command-line&gt;\" 2\n# 1 \"hello.c\"\n# 1 \"/usr/include/stdio.h\" 1 3 4\n# 27 \"/usr/include/stdio.h\" 3 4\n# 1 \"/usr/include/x86_64-linux-gnu/bits/libc-header-start.h\" 1 3 4\n# 33 \"/usr/include/x86_64-linux-gnu/bits/libc-header-start.h\" 3 4\n......\n# 209 \"/usr/lib/gcc/x86_64-linux-gnu/11/include/stddef.h\" 3 4\ntypedef long unsigned int size_t;\n# 34 \"/usr/include/stdio.h\" 2 3 4\n......\n# 1 \"/usr/include/x86_64-linux-gnu/bits/types/__mbstate_t.h\" 1 3 4\n# 13 \"/usr/include/x86_64-linux-gnu/bits/types/__mbstate_t.h\" 3 4\ntypedef struct\n{\n  int __count;\n  union\n  {\n    unsigned int __wch;\n    char __wchb[4];\n  } __value;\n} __mbstate_t;\n# 6 \"/usr/include/x86_64-linux-gnu/bits/types/__fpos_t.h\" 2 3 4\n......\nstruct _IO_FILE;\n......\nextern int remove (const char *__filename) __attribute__ ((__nothrow__ , __leaf__));\n......\n# 885 \"/usr/include/stdio.h\" 3 4\nextern int __uflow (FILE *);\nextern int __overflow (FILE *, int);\n# 902 \"/usr/include/stdio.h\" 3 4\n# 2 \"hello.c\" 2\n# 3 \"hello.c\"\nint main() {\n printf(\"hello, world!\\n\");\n return 0;\n}\n</code></pre> <p><code>hello.i</code> \u6587\u4ef6\u7684\u5185\u5bb9\u5f88\u957f\uff0c\u505a\u4e00\u4e9b\u7cbe\u7b80\u5904\u7406\u540e\u53ef\u4ee5\u53d1\u73b0\uff0c\u5b9e\u9645\u4e0a\u662f\u628a\u4e00\u4e9b\u5185\u5bb9\u7ed9\u66ff\u6362\u5230\u4e86\u539f\u6765 <code>#include&lt;stdio.h&gt;</code> \u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u5199\u7684\u7528\u6237\u4ee3\u7801\u8fdb\u884c\u4e86\u4fdd\u7559\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>hello.i</code> \u6587\u4ef6\u5bf9\u5e94\u7684\u662f log \u7b2c\u4e8c\u6bb5\u5bf9\u5934\u6587\u4ef6\u8fdb\u884c\u5904\u7406\u7684\u90e8\u5206\u3002</p> <p>\u518d\u770b <code>hello.s</code> \u6587\u4ef6\uff1a</p> <pre><code>$ cat hello.s\n    .file   \"hello.c\"\n    .text\n    .section    .rodata\n.LC0:\n    .string \"hello, world!\"\n    .text\n    .globl  main\n    .type   main, @function\nmain:\n.LFB0:\n    .cfi_startproc\n    endbr64\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset 6, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register 6\n    leaq    .LC0(%rip), %rax\n    movq    %rax, %rdi\n    call    puts@PLT\n    movl    $0, %eax\n    popq    %rbp\n    .cfi_def_cfa 7, 8\n    ret\n    .cfi_endproc\n.LFE0:\n    .size   main, .-main\n    .ident  \"GCC: (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0\"\n    .section    .note.GNU-stack,\"\",@progbits\n    .section    .note.gnu.property,\"a\"\n    .align 8\n    .long   1f - 0f\n    .long   4f - 1f\n    .long   5\n0:\n    .string \"GNU\"\n1:\n    .align 8\n    .long   0xc0000002\n    .long   3f - 2f\n2:\n    .long   0x3\n3:\n    .align 8\n4:\n</code></pre> <p>\u539f\u6765\u662f\u6c47\u7f16\uff01\u800c\u4e14\u662f\u5178\u578b\u7684 x86-64 \u6c47\u7f16\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>cc1</code> \u8fd9\u4e2a\u7a0b\u5e8f\u628a <code>hello.c</code> \u5904\u7406\u6210\u4e86 <code>hello.s</code> \u7684 x86-64 \u6c47\u7f16\uff01\u540c\u6837\uff0c\u987a\u85e4\u6478\u74dc\uff0c\u6bd4\u846b\u82a6\u753b\u74e2\uff1a</p> <pre><code>$ cat hello.o\nU\ufffdUH\ufffd\ufffdH\ufffdH\ufffd\ufffd\ufffd\ufffd]\ufffdhello, world!GCC: (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0GNU\ufffdzR\ufffdE\ufffdC\n\ufffd\ufffd  hello.cmainputs\n                       \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd .symtab.strtab.shstrtab.rela.text.data.bss.rodata.comment.note.GNU-stack.note.gnu.property.rela.eh_frame @@\ufffd0\n                                                                                                                                                    &amp;^^1^90l,B\ufffdR\ufffdj\ufffde@\ufffd\n      \ufffd\ufffd\ufffd\n            \ufffd\ufffdt\u23ce\n</code></pre> <p><code>as</code> \u53c8\u628a x86-64 \u6c47\u7f16\u5904\u7406\u6210\u4e86\u4e00\u4e2a\u5176\u4e2d\u5305\u542b\u5927\u91cf\u4e0d\u53ef\u8bfb\u7684\u5b57\u7b26\u7684\u6587\u4ef6\uff0c\u90a3\u5e72\u8106\u628a <code>hello</code> \u6587\u4ef6\u4e5f\u8f93\u51fa\u4e00\u4e0b\uff0c\u505a\u4e2a\u6bd4\u8f83\uff1a</p> <pre><code>$ cat hello\n@@@@\ufffd((uu   \ufffd\ufffd\ufffd-\ufffd=\ufffd=X`\ufffd-\ufffd=\ufffd=\ufffd8880hhhDDS\ufffdtd8880P\ufffdtd   44Q\ufffdtdR\ufffdtd\ufffd-\ufffd=\ufffd=HH/lib64/ld-linux-x86-64.so.2 GNU\ufffd\ufffd\ufffdGNUf_Kwt\ufffdjG\ufffd\ufffd\ufffdA%\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdGNU\ufffd\ufffde\ufffdmH \"d s \"__cxa_finalize__libc_start_mainputslibc.so.6GLIBC_2.2.5GLIBC_2.34_ITM_deregisterTMCloneTable__gmon_start___ITM_registerTMCloneTable'ui   1\ufffd\ufffd\ufffd=\ufffd@\ufffd?\ufffd?\ufffd?\ufffd?\ufffd?\ufffd?\ufffd\ufffdH\ufffdH\ufffd\ufffd/H\ufffd\ufffdt\ufffd\ufffdH\ufffd\ufffd\ufffd5\ufffd/\ufffd\ufffd%\ufffd/\ufffd\ufffdh\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd%\ufffd/D\ufffd\ufffd\ufffd\ufffd%u/D\ufffd\ufffd1\ufffdI\ufffd\ufffd^H\ufffd\ufffdH\ufffd\ufffd\ufffdPTE1\ufffd1\ufffdH\ufffd=\ufffd\ufffdS/\ufffdf.\ufffdH\ufffd=y/H\ufffdr/H9\ufffdtH\ufffd6/H\ufffd\ufffdt   \ufffd\ufffd\ufffd\ufffd\ufffdH\ufffd=I/H\ufffd5B/H)\ufffdH\ufffd\ufffdH\ufffd\ufffd?H\ufffd\ufffdH\ufffdH\ufffd\ufffdtH\ufffd/H\ufffd\ufffd\ufffd\ufffdfD\ufffd\ufffd\ufffd\ufffd=/u+UH\ufffd=\ufffd.H\ufffd\ufffdt\n                                                                                                                                                      H\ufffd=\ufffd.\ufffd\ufffd\ufffd\ufffd\ufffdd\ufffd\ufffd\ufffd\ufffd\ufffd.]\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdw\ufffd\ufffd\ufffd\ufffd\ufffdUH\ufffd\ufffdH\ufffd\ufffdH\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd]\ufffd\ufffd\ufffdH\ufffdH\ufffd\ufffdhello, world!;0\n                                                       \ufffd\ufffd\ufffdd,\ufffd\ufffd\ufffd\ufffd&lt;\ufffd\ufffd\ufffd\ufffdL\ufffd\ufffd\ufffdL5\ufffd\ufffd\ufffd\ufffdzR\ufffd\ufffd\ufffd\ufffd\ufffd&amp;D$4\ufffd\ufffd\ufffd\ufffd FJ\nU                                                                                                \ufffd?:*3$\"\\\ufffd\ufffd\ufffd\ufffdt\ufffd\ufffd\ufffd\ufffd\ufffdq\ufffd\ufffd\ufffdE\ufffdC\n@'\nh\ufffd\ufffd\ufffd\ufffd\ufffdo\ufffd\ufffd\ufffd\n\ufffd\n \ufffd?\ufffd  \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdo \ufffd\ufffd\ufffdo\ufffd\ufffd\ufffdo\ufffd\ufffd\ufffdo\ufffd=@GCC: (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0\ufffd\ufffd  \ufffd \ufffd\ufffd\ufffd \ufffd3I@U\ufffd=|@\ufffd\ufffd=\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd=\ufffd \ufffd\ufffd?\ufffd\n                                                                                                                      H @(9@@hF@S @o ~@L`&amp;\ufffd@\ufffdI\ufffd@\ufffd \ufffd\"\ufffd\n                                                                                                                                                     Scrt1.o__abi_tagcrtstuff.cderegister_tm_clones__do_global_dtors_auxcompleted.0__do_global_dtors_aux_fini_array_entryframe_dummy__frame_dummy_init_array_entryhello.c__FRAME_END___DYNAMIC__GNU_EH_FRAME_HDR_GLOBAL_OFFSET_TABLE___libc_start_main@GLIBC_2.34_ITM_deregisterTMCloneTableputs@GLIBC_2.2.5_edata_fini__data_start__gmon_start____dso_handle_IO_stdin_used_end__bss_startmain__TMC_END___ITM_registerTMCloneTable__cxa_finalize@GLIBC_2.2.5_init.symtab.strtab.shstrtab.interp.note.gnu.property.note.gnu.build-id.note.ABI-tag.gnu.hash.dynsym.dynstr.gnu.version.gnu.version_r.rela.dyn.rela.plt.init.plt.got.plt.sec.text.fini.rodata.eh_frame_hdr.eh_frame.init_array.fini_array.dynamic.data.bss.comment#886hh$I\ufffd\ufffd W\ufffd\ufffd\ufffdo\ufffd\ufffda\n\ufffd  \ufffd  4\ufffdH H \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd=\ufffd-\ufffd\ufffd?\ufffd@0             \ufffd\ufffdi\ufffd\ufffd\ufffdq\ufffd\ufffd\ufffdo~\ufffd\ufffd\ufffdo  \ufffdPP\ufffd\ufffd\ufffd   \ufffd@@\ufffdPP\ufffd``\ufffdhh\n                         @00+@0`\ufffd3\ufffd{5\u23ce\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6700\u540e\u7684 <code>hello</code> \u5728 <code>hello.o</code> \u7684\u57fa\u7840\u4e0a\u52a0\u4e86\u5f88\u591a\u4e1c\u897f\uff0c\u8fd8\u51fa\u73b0\u4e86 <code>lib64/ld-linux-x86-64.so.2</code> \u8fd9\u6837\u7684\u4e1c\u897f\u2014\u2014\u76f2\u731c\u548c\u90a3\u4e2a\u5904\u7406 <code>.so</code> \u6587\u4ef6\u7684 <code>collect2</code> \u6709\u5173\uff01</p>"},{"location":"system/prog/compile/#_1","title":"\u62bd\u8c61\u6982\u5ff5","text":"<p>\u597d\u4e86\uff0c\u6211\u4eec\u7ec8\u4e8e\u53ef\u4ee5\u5728\u5934\u8111\u91cc\u5f62\u6210\u4e00\u4e2a\u6982\u5ff5\u6027\u7684\u8fc7\u7a0b\u4e86\uff1a</p> <pre><code>graph LR\n  A[hello.c] --&gt; |cc1| B(hello.s);\n  B --&gt; |as| C(hello.o);\n  C --&gt; |collect2| D[hello];</code></pre> <p>\u4f46\u662f\u90a3\u4e2a <code>hello.i</code> \u6587\u4ef6\u5462\uff1f\u8003\u8651\u5230\u5b83\u5e76\u6ca1\u6709\u5bf9\u6211\u4eec\u7684\u7528\u6237\u4ee3\u7801\u505a\u5927\u5e45\u4fee\u6539\uff0c\u4e5f\u6ca1\u6709\u8c03\u7528\u50cf\u662f <code>cc1</code> \u8fd9\u6837\u7684\u7a0b\u5e8f\uff0c\u5b83\u5e94\u8be5\u5c31\u662f\u5728\u6700\u524d\u9762\u7684\u4e00\u4e2a\u6d41\u7a0b\uff1a</p> <pre><code>graph LR\n  A[hello.c] --&gt; B(hello.i);\n  B --&gt; |cc1| C(hello.s);\n  C --&gt; |as| D(hello.o);\n  D --&gt; |collect2| E[hello];</code></pre> <p>\u771f\u662f\u4e00\u6bb5\u6f2b\u957f\u7684\u65c5\u7a0b\u5462\uff0c\u6211\u4eec\u770b\u4e86\u90a3\u4e48\u591a\u7684 log \u548c\u4e2d\u95f4\u6587\u4ef6\uff0c\u6700\u540e\u53ea\u63a8\u7406\u5f97\u5230\u4e86\u4e00\u4e2a\u8fd9\u6837\u7684\u6982\u5ff5\u6027\u7684\u56fe\u793a\u3002\u5230\u8fd9\u91cc\uff0c\u524d\u9762\u90a3\u4e9b\u7ec6\u8282\u5c31\u53ef\u4ee5\u5fd8\u6389\u4e86\u3002</p>"},{"location":"system/prog/compile/#call","title":"\u7406\u8bba\uff1aCALL + \u7ecf\u5178\u4e09\u5e55\u5267","text":""},{"location":"system/prog/compile/#_2","title":"\u7ecf\u5178\u7f16\u8bd1\u7406\u8bba","text":"<p>\u6211\u4eec\u7ec8\u4e8e\u8981\u4ecb\u7ecd\u4e00\u4e0b\u7406\u8bba\u4e0a\u7684\u7f16\u8bd1\u8fc7\u7a0b\u4e86\uff0c\u6709\u4e86\u524d\u9762\u7684\u94fa\u57ab\uff0c\u5bf9\u7406\u8bba\u7684\u7406\u89e3\u4e5f\u4f1a\u66f4\u8f7b\u677e\u548c\u900f\u5f7b\u4e00\u4e9b\uff1a</p> <pre><code>%%{init: {\"flowchart\": {\"htmlLabels\": false}} }%%\nflowchart TB\n    A[Begin] --\"source code(.c .cpp .h)\"--&gt; cc\n    subgraph cc\n        direction TB\n        B(Preprocessing) --\"include header, expand macro(.i .ii)\"--&gt; C(Compilation)\n    end\n    cc --\"assembly code(.s)\"--&gt; as\n    subgraph as\n        D(Assemble)\n    end\n    as --\"machine code(.o .obj)\"--&gt; ld\n    F(libc) --\"static library(.lib .a) or shared blibrary(.dll\u00a0.so)\"--&gt; ld\n    subgraph ld\n        E(Linking)\n    end\n    ld --\"exectable machine code(.exe elf)\"--&gt; G[end]</code></pre> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e00\u4e2a\u00a0<code>gcc -o hello.exe hello.c</code>\u7684\u7f16\u8bd1\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u9884\u5904\u7406\uff1a\u7f16\u8bd1\u5668 <code>cc</code> \u4e3b\u8981\u662f\u505a\u5305\u542b\u5934\u6587\u4ef6\uff08<code>#include</code>\uff09\u4ee5\u53ca\u6269\u5c55\u5b8f\uff08<code>#define</code>\uff09\u7684\u64cd\u4f5c\uff0c\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5c31\u662f\u628a\u5934\u6587\u4ef6\u548c\u5b8f\u90fd\u505a\u66ff\u6362\u3002\u751f\u6210\u7684\u4e2d\u95f4\u6587\u4ef6 <code>hello.i</code> \u5305\u542b\u9884\u5904\u7406\u540e\u7684\u6e90\u4ee3\u7801</li> <li>\u7f16\u8bd1\uff1a\u7f16\u8bd1\u5668 <code>cc</code> \u5c06\u9884\u5904\u7406\u7684\u6e90\u4ee3\u7801\u7f16\u8bd1\u4e3a\u9762\u5411\u7279\u5b9a\u4f53\u7cfb\u7ed3\u6784\u7684\u6c47\u7f16\u4ee3\u7801\u3002\u751f\u6210\u7684\u6c47\u7f16\u6587\u4ef6\u4e3a\u00a0<code>hello.s</code></li> <li>\u6c47\u7f16\uff1a\u6c47\u7f16\u5668 <code>as</code> \u5c06\u6c47\u7f16\u4ee3\u7801\u8f6c\u6362\u4e3a\u76ee\u6807\u6587\u4ef6\u00a0<code>hello.o</code>\u4e2d\u7684\u673a\u5668\u4ee3\u7801\uff0c\u66f4\u5177\u4f53\u5730\uff0c\u5c31\u662f\u628a\u6c47\u7f16\u4ee3\u7801\u6309\u7167\u6307\u4ee4\u96c6\u624b\u518c\u7684\u6807\u51c6\u8f6c\u6362\u4e3a 0101 \u5e8f\u5217\uff0c\u5373\u673a\u5668\u4ee3\u7801</li> <li>\u94fe\u63a5\uff1a\u6700\u540e\uff0c\u94fe\u63a5\u5668\uff08<code>ld</code>\uff09\u5c06\u76ee\u6807\u6587\u4ef6\u4e0e\u5e93\u6587\u4ef6\u94fe\u63a5\u8d77\u6765\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 <code>hello</code></li> </ol> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u503c\u5f97\u7ec6\u8bf4\u7684\u4e1c\u897f\u8fd8\u6709\u5f88\u591a\u3002</p> <p>\u7ed3\u5408\u6211\u4eec\u4e0a\u6587\u5bf9 gcc \u7f16\u8bd1\u65e5\u5fd7\u7684\u5206\u6790\uff0c\u9996\u5148\uff0c\u5b50\u7a0b\u5e8f <code>cc1</code> \u4f1a\u88ab\u8c03\u7528\uff0c\u89e6\u53d1\u300ccompilation\u300d\u9636\u6bb5\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\u7684\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u9047\u5230\u5934\u6587\u4ef6\u6216\u8005\u5b8f\u65f6\uff0c\u4f1a\u8fdb\u5165\u300cpreprocessing\u300d\u9636\u6bb5\uff0c\u505a\u5bf9\u5e94\u6587\u4ef6\u7684\u66ff\u6362\u6216\u8005\u5b8f\u5c55\u5f00\uff0c\u4e8c\u8005\u4ea4\u66ff\u8fdb\u884c\uff0c\u6700\u7ec8\u751f\u6210\u5b8c\u6574\u7684 <code>hello.s</code> \u6587\u4ef6\u3002</p> <p>\u300cassemble\u300d\u9636\u6bb5\u4e4b\u540e\uff0c<code>hello.s</code> \u6587\u4ef6\u4f1a\u88ab\u6c47\u7f16\u6210\u4e8c\u8fdb\u5236\u7684 <code>hello.o</code> \u6587\u4ef6\uff0c\u4e5f\u6709\u4eba\u628a\u8fd9\u79cd\u6587\u4ef6\u53eb\u505a relocatable object file\uff0c\u76f4\u8bd1\u4e3a \u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\uff0c\u5177\u4f53\u542b\u4e49\u662f\u6307\u8be5\u6587\u4ef6\u4e2d\u6ca1\u6709\u5bf9\u5f15\u7528\u7684\u7cfb\u7edf\u5e93\u6216\u5176\u4ed6\u7b2c\u4e09\u65b9\u5e93\u505a\u94fe\u63a5\uff0c\u6240\u4ee5\u662f\u5730\u5740\u65e0\u5173\u7684\u4e00\u79cd\u6587\u4ef6\uff0c\u4e5f\u4e0d\u80fd\u76f4\u63a5\u8fd0\u884c\uff0c\u6545\u300c\u53ef\u91cd\u5b9a\u4f4d\u300d\u3002</p> <p>\u5177\u4f53\u5730\u8bf4\uff0c\u6bd4\u5982\u6211\u4eec\u7684 <code>hello.c</code> \u4e2d\u8c03\u7528\u4e86 <code>stdio</code> \u6807\u51c6\u5e93\u4e2d\u7684 <code>printf</code> \u51fd\u6570\uff0c\u4f46\u6211\u4eec\u53ea\u5305\u542b\u4e86 <code>stdio.h</code> \u7684\u5934\u6587\u4ef6\uff0c\u5934\u6587\u4ef6\u4e2d\u53c8\u6ca1\u6709\u8fd9\u4e2a\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u53ea\u6709\u4e00\u4e2a\u58f0\u660e\u800c\u5df2\uff0c\u90a3 <code>printf</code> \u51fd\u6570\u7684\u5b9e\u73b0\u7a76\u7adf\u5728\u54ea\uff1f\u7b54\u6848\u5c31\u662f libc\uff0c\u4e5f\u5c31\u662f\u5bf9 C \u6807\u51c6\u5e93\u7684\u4e00\u4e2a\u5b9e\u73b0\u3002\u4f46\u662f\uff0c\u5728\u94fe\u63a5\u4e0a libc \u8fd9\u79cd\u6807\u51c6\u5e93\u6216\u8005\u6211\u4eec\u81ea\u5df1\u9700\u8981\u7684\u7b2c\u4e09\u65b9\u5e93\u4e4b\u524d\uff0c\u6211\u4eec\u5728\u505a\u51fd\u6570\u8c03\u7528\u65f6\u5e76\u4e0d\u80fd\u786e\u5b9a\u8be5\u51fd\u6570\u8df3\u8f6c\u7684\u4f4d\u7f6e\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u300c\u53ef\u91cd\u5b9a\u4f4d\u300d\u7684\u4e00\u4e2a\u4f53\u73b0\u3002</p>"},{"location":"system/prog/compile/#_3","title":"\u989d\u5916\u7684\u94fe\u63a5\u5206\u6790","text":"<p>\u90a3\u4e48\u94fe\u63a5\u9636\u6bb5\u53c8\u5982\u4f55\u5462\uff1f\u597d\u5427\u94fe\u63a5\u53c8\u5206\u4e3a Static Linking \u548c Dynamic Linking\uff0c\u5206\u522b\u5bf9\u5e94\u4e8e Static Libraries (.lib\u00a0.a) \u548c Shared Library (.dll\u00a0.so)\u3002\u533a\u522b\u5c31\u662f\u524d\u8005\u662f\u76f4\u63a5\u5c06\u76ee\u6807\u6587\u4ef6\u548c\u9759\u6001\u5e93\u6587\u4ef6\u6253\u5305\u5408\u5e76\u4e3a\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u800c\u540e\u8005\u5219\u662f\u628a\u5171\u4eab\u5e93\u7684\u4e00\u4e2a\u300c\u7279\u6b8a\u6307\u9488\u300d\u5199\u5230\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u5f85\u76ee\u6807\u6587\u4ef6\u6267\u884c\u9700\u8981\u7528\u5230\u5171\u4eab\u5e93\u65f6\uff0c\u518d\u505a\u52a8\u6001\u7684\u8c03\u7528\u3002</p> <p>\u5bf9\u5e94\u7684\u4f18\u52a3\u52bf\u4e5f\u662f\u663e\u7136\u7684\uff1a\u9759\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u5bf9\u8fd0\u884c\u65f6\u73af\u5883\uff08runtime\uff09\u7684\u8981\u6c42\u66f4\u4f4e\uff0c\u4f46\u8d39\u7a7a\u95f4\uff0c\u52a8\u6001\u94fe\u63a5\u5219\u53cd\u8fc7\u6765\uff1a\u7701\u7a7a\u95f4\uff0c\u5e93\u6587\u4ef6\u53ef\u590d\u7528\uff0c\u4f46\u4e07\u4e00\u8fd0\u884c\u65f6\u73af\u5883\u4e2d\u6ca1\u6709\u5bf9\u5e94\u7684\u5e93\u6587\u4ef6\uff0c\u7a0b\u5e8f\u5c31\u8dd1\u4e0d\u8d77\u6765\u4e86\u3002</p> <p>\u53ef\u4ee5\u505a\u4e2a\u5c0f\u5c0f\u7684\u6d4b\u8bd5\uff1a</p> <pre><code>$ gcc -o hello_static hello.c -static\n$ gcc -o hello_dynamic hello.c\n$ file hello_static\nhello_static: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), statically linked, BuildID[sha1]=f5e96a4b7db3667493ac65f24e2de5fdcb78a4d1, for GNU/Linux 3.2.0, not stripped\n$ file hello_dynamic\nhello_dynamic: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=665f4b77749f6a479ac9cd41259b9bdf0e9e88ed, for GNU/Linux 3.2.0, not stripped\n$ ll\ntotal 900K\n-rw-rw-r-- 1 ghzhang ghzhang   73 May 29 02:50 hello.c\n-rwxrwxr-x 1 ghzhang ghzhang  16K May 29 18:20 hello_dynamic*\n-rwxrwxr-x 1 ghzhang ghzhang 880K May 29 18:20 hello_static*\n</code></pre> <p>\u7ed3\u679c\u662f\u663e\u7136\u7684\u3002\u9759\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u6bd4\u52a8\u6001\u94fe\u63a5\u7684\u5927\u4e86 \\(55\\) \u500d\uff01\u6211\u4eec\u8fd8\u53ef\u4ee5\u770b\u5230\u52a8\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u7528\u5230\u4e86 <code>/lib64/ld-linux-x86-64.so.2</code> \u8fd9\u4e2a\u5e93\u6587\u4ef6\uff0c\u90a3\u6211\u4eec\u987a\u85e4\u6478\u74dc\uff0c\u53bb\u627e\u4e00\u4e0b\uff1a</p> <pre><code>$ file /lib64/ld-linux-x86-64.so.2\n/lib64/ld-linux-x86-64.so.2: symbolic link to /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\n$ file /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\n/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2: ELF 64-bit LSB shared object, x86-64, version 1 (GNU/Linux), dynamically linked, BuildID[sha1]=246ac0d8deba5a40c63e9a1a87d4d779d8eb589f, stripped\n$ ll /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\n-rwxr-xr-x 1 root root 236K Apr 16 21:40 /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2*\n</code></pre> <p>\u4ec5\u4ec5\u8fd9\u4e00\u4e2a\u5171\u4eab\u5e93\u5c31 <code>236kb</code> \u5927\uff0c\u6bd4\u9759\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u672c\u8eab\u8fd8\u8981\u5927 \\(14.75\\) \u500d\uff01</p> <p>\u5176\u5b9e\uff0c\u8fd8\u53ef\u4ee5\u505a\u8fdb\u4e00\u6b65\u7684\u5206\u6790\uff0c\u6bd4\u5982\u5bf9\u7f16\u8bd1\u51fa\u6765\u7684 elf \u6587\u4ef6\u505a\u5206\u6790\uff0c\u67e5\u770b\u5177\u4f53\u4ee3\u7801\u6bb5\u7684\u4f4d\u7f6e\u548c\u5185\u5bb9\uff0c\u53ef\u4ee5\u66f4\u76f4\u89c2\u5730\u770b\u51fa\u4e24\u79cd\u94fe\u63a5\u65b9\u5f0f\u7684\u533a\u522b\uff0c\u4e0d\u8fc7\u73b0\u5728\u4e5f\u5df2\u7ecf\u5728\u628a\u4e8c\u8005\u7684\u5b9e\u8d28\u6027\u5dee\u5f02\u8bf4\u6e05\u695a\u4e86\u3002</p>"},{"location":"system/prog/compile/#_4","title":"\u4e09\u6bb5\u5f0f\u7f16\u8bd1\u5668\u8bbe\u8ba1","text":""},{"location":"system/prog/compile/#just-so-so","title":"\u6df1\u5165\uff1aJust so so?","text":""},{"location":"system/prog/compile/#deeper-deeper","title":"\u73b0\u4ee3\uff1adeeper &amp; deeper","text":""},{"location":"system/prog/compile/#to-be-a-thinker","title":"\u672a\u6765\uff1ato be a thinker","text":""},{"location":"system/prog/compile/#more","title":"\u66f4\u591a\uff1aMore","text":""},{"location":"system/prog/run/","title":"Run","text":""}]}